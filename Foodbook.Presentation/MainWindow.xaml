<Window x:Class="Foodbook.Presentation.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Foodbook.Presentation"
        xmlns:converters="clr-namespace:Foodbook.Presentation.Converters"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
        Title="ðŸ½ï¸ Foodbook - AI-Powered Recipe Manager" 
        Height="700" Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#F8F9FA"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResize">
    
    <Window.Resources>
        <!-- Converters -->
        <converters:TabVisibilityConverter x:Key="TabVisibilityConverter"/>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        
        <!-- Modern Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#4CAF50"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- Card Style -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="20"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#6B7280"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,16"/>
            <Setter Property="Margin" Value="8,4"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- Active Sidebar Button Style -->
        <Style x:Key="ActiveSidebarButton" TargetType="Button" BasedOn="{StaticResource SidebarButton}">
            <Setter Property="Background" Value="#E0F2F1"/>
            <Setter Property="Foreground" Value="#00796B"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <!-- Recipe Card Style -->
        <Style x:Key="RecipeCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="2" Opacity="0.08" BlurRadius="12"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Custom Title Bar -->
        <Border Grid.Row="0" Background="#3B82F6" Height="50" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
                    <TextBlock Text="ðŸ½ï¸" FontSize="18" Margin="0,0,10,0"/>
                    <TextBlock Text="Foodbook" FontSize="16" FontWeight="Bold" Foreground="White"/>
                </StackPanel>
                
                <!-- Search Bar -->
                <Border Grid.Column="1" Background="White" CornerRadius="20" Padding="15,8" Margin="0,0,15,0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ”" FontSize="14" Margin="0,0,8,0"/>
                        <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="14"
                                Width="200"
                                VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
                
                <!-- Window Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="ðŸ”" 
                           Background="#4CAF50"
                           Foreground="White"
                           Width="36" Height="36"
                           FontSize="14"
                           Margin="0,0,8,0"
                           Command="{Binding SearchRecipesCommand}"/>
                    <Button Content="ðŸ›’" 
                           Background="#6B7280"
                           Foreground="White"
                           Width="36" Height="36"
                           FontSize="14"
                           Margin="0,0,15,0"/>
                    <Button Content="ðŸ—•" 
                           Background="Transparent" 
                           Foreground="White" 
                           BorderThickness="0" 
                           Width="40" Height="40"
                           FontSize="12"
                           Click="MinimizeButton_Click"
                           ToolTip="Minimize"/>
                    <Button Content="ðŸ—–" 
                           Background="Transparent" 
                           Foreground="White" 
                           BorderThickness="0" 
                           Width="40" Height="40"
                           FontSize="12"
                           Click="MaximizeButton_Click"
                           ToolTip="Maximize"
                           x:Name="MaximizeButton"/>
                    <Button Content="âœ•" 
                           Background="Transparent" 
                           Foreground="White" 
                           BorderThickness="0" 
                           Width="40" Height="40"
                           FontSize="12"
                           Click="CloseButton_Click"
                           ToolTip="Close"
                           MouseEnter="CloseButton_MouseEnter"
                           MouseLeave="CloseButton_MouseLeave"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

        <!-- Left Sidebar -->
        <Border Grid.Column="0" Background="White" CornerRadius="0,0,20,0" Width="260">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- User Profile Section -->
                <Border Grid.Row="0" Padding="16,20,16,16" Background="#F8FAFC">
                    <StackPanel>
                        <Ellipse Width="45" Height="45" Fill="#3B82F6" Margin="0,0,0,6"/>
                        <TextBlock Text="{Binding CurrentUser.Username, StringFormat='Hello, {0}!'}" 
                                  FontSize="15" 
                                  FontWeight="SemiBold" 
                                  Foreground="#1F2937"
                                  HorizontalAlignment="Center"/>
                        <TextBlock Text="Ready to cook?" 
                                  FontSize="11" 
                                  Foreground="#6B7280"
                                  HorizontalAlignment="Center"/>
                        <Button Content="Logout" 
                                Background="Transparent"
                                Foreground="#EF4444"
                                FontSize="10"
                                BorderThickness="0"
                                Padding="4,2"
                                Margin="0,4,0,0"
                                Click="Logout_Click"
                                Cursor="Hand"/>
                    </StackPanel>
                </Border>

                <!-- Navigation Menu -->
                <StackPanel Grid.Row="1" Margin="8,8,8,8">
                    <Button Content="ðŸ  Dashboard" 
                           Command="{Binding SelectTabCommand}"
                           CommandParameter="Dashboard"
                           Margin="0,0,0,4">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedTab}" Value="Dashboard">
                                        <Setter Property="Background" Value="#E0F2F1"/>
                                        <Setter Property="Foreground" Value="#00796B"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Content="ðŸ“š My Recipes" 
                           Command="{Binding SelectTabCommand}"
                           CommandParameter="Recipes"
                           Margin="0,0,0,4">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedTab}" Value="Recipes">
                                        <Setter Property="Background" Value="#E0F2F1"/>
                                        <Setter Property="Foreground" Value="#00796B"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Content="ðŸ¥˜ Ingredients" 
                           Command="{Binding SelectTabCommand}"
                           CommandParameter="Ingredients"
                           Margin="0,0,0,4">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedTab}" Value="Ingredients">
                                        <Setter Property="Background" Value="#E0F2F1"/>
                                        <Setter Property="Foreground" Value="#00796B"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Content="ðŸ¤– AI Chef" 
                           Command="{Binding SelectTabCommand}"
                           CommandParameter="AI"
                           Margin="0,0,0,4">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedTab}" Value="AI">
                                        <Setter Property="Background" Value="#E0F2F1"/>
                                        <Setter Property="Foreground" Value="#00796B"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Content="ðŸ“Š Analytics" 
                           Command="{Binding SelectTabCommand}"
                           CommandParameter="Analytics"
                           Margin="0,0,0,4">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedTab}" Value="Analytics">
                                        <Setter Property="Background" Value="#E0F2F1"/>
                                        <Setter Property="Foreground" Value="#00796B"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Content="âš™ï¸ Settings" 
                           Command="{Binding SelectTabCommand}"
                           CommandParameter="Settings"
                           Margin="0,0,0,4">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedTab}" Value="Settings">
                                        <Setter Property="Background" Value="#E0F2F1"/>
                                        <Setter Property="Foreground" Value="#00796B"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>

                <!-- Promotional Card -->
                <Border Grid.Row="2" Background="#EFF6FF" CornerRadius="12" Margin="8,8,8,16" Padding="16">
                    <StackPanel>
                        <TextBlock Text="ðŸš€ AI Cooking!" 
                                  FontSize="15" 
                                  FontWeight="SemiBold" 
                                  Foreground="#1E40AF"
                                  Margin="0,0,0,6"/>
                        <TextBlock Text="Get AI-powered recipe suggestions and cooking tips!" 
                                  FontSize="11" 
                                  Foreground="#3B82F6"
                                  TextWrapping="Wrap"
                                  Margin="0,0,0,8"/>
                        <Button Content="Learn more â†’" 
                               Background="#3B82F6"
                               Foreground="White"
                               Padding="8,6"
                               FontSize="11"
                               BorderThickness="0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Column="1" Margin="20,20,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Welcome Section -->
            <Border CornerRadius="12" Padding="24,20" Margin="0,0,0,24">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#F0F9FF" Offset="0"/>
                        <GradientStop Color="#E0F2FE" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <StackPanel>
                    <TextBlock Text="Welcome to Foodbook" 
                              FontSize="28" 
                              FontWeight="Bold" 
                              Foreground="#111827"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="Discover amazing recipes with AI assistance" 
                              FontSize="16" 
                              Foreground="#6B7280"/>
                </StackPanel>
            </Border>

            <!-- Main Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Dashboard Content -->
                    <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Dashboard}">
                        <!-- Categories -->
                        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                        <StackPanel>
                            <TextBlock Text="ðŸ½ï¸ Recipe Categories" 
                                      FontSize="20" 
                                      FontWeight="Bold" 
                                      Margin="0,0,0,16"/>
                            
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                                <StackPanel Orientation="Horizontal">
                                    <Border Background="#EF4444" CornerRadius="20" Padding="20,12" Margin="0,0,12,0">
                                        <TextBlock Text="ðŸ½ï¸ All Recipes" 
                                                  Foreground="White" 
                                                  FontWeight="SemiBold"/>
                                    </Border>
                                    <Border Background="#F3F4F6" CornerRadius="20" Padding="20,12" Margin="0,0,12,0">
                                        <TextBlock Text="ðŸ” Main Dishes" 
                                                  Foreground="#374151" 
                                                  FontWeight="SemiBold"/>
                                    </Border>
                                    <Border Background="#F3F4F6" CornerRadius="20" Padding="20,12" Margin="0,0,12,0">
                                        <TextBlock Text="ðŸ¥— Salads" 
                                                  Foreground="#374151" 
                                                  FontWeight="SemiBold"/>
                                    </Border>
                                    <Border Background="#F3F4F6" CornerRadius="20" Padding="20,12" Margin="0,0,12,0">
                                        <TextBlock Text="ðŸ° Desserts" 
                                                  Foreground="#374151" 
                                                  FontWeight="SemiBold"/>
                                    </Border>
                                    <Border Background="#F3F4F6" CornerRadius="20" Padding="20,12" Margin="0,0,12,0">
                                        <TextBlock Text="ðŸ¥¤ Drinks" 
                                                  Foreground="#374151" 
                                                  FontWeight="SemiBold"/>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>

                    <!-- Action Buttons -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                        <StackPanel>
                            <TextBlock Text="âš¡ Quick Actions" 
                                      FontSize="20" 
                                      FontWeight="Bold" 
                                      Margin="0,0,0,16"/>
                            
                            <StackPanel Orientation="Horizontal">
                                <Button Content="ðŸ”„ Refresh Recipes" 
                                       Style="{StaticResource ModernButton}"
                                       Command="{Binding LoadRecipesCommand}"/>
                                <Button Content="ðŸ¤– Generate Recipe" 
                                       Style="{StaticResource ModernButton}"
                                       Background="#FF9800"
                                       Command="{Binding GenerateRecipeCommand}"/>
                                <Button Content="ðŸ‘¨â€ðŸ³ Judge Dish" 
                                       Style="{StaticResource ModernButton}"
                                       Background="#9C27B0"
                                       Command="{Binding JudgeDishCommand}"/>
                                <Button Content="ðŸ“¸ Image Analysis" 
                                       Style="{StaticResource ModernButton}"
                                       Background="#E91E63"
                                       Click="OpenImageAnalysis_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Recipe Grid -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Text="ðŸ“š All Recipes" 
                                          FontSize="20" 
                                          FontWeight="Bold"
                                          Grid.Column="0"/>
                                
                                <Button Content="View all â†’" 
                                       Background="Transparent"
                                       Foreground="#6B7280"
                                       BorderThickness="0"
                                       FontSize="14"
                                       Grid.Column="1"/>
                            </Grid>

                        <ItemsControl ItemsSource="{Binding Recipes}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="2"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                        <Border Style="{StaticResource RecipeCard}" Width="350" Height="320" Margin="0,0,0,20">
    <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="140"/>
                                                    <RowDefinition Height="*"/>
                                                </Grid.RowDefinitions>

                                                <!-- Recipe Image -->
                                                <Border Grid.Row="0" CornerRadius="16,16,0,0">
                                                    <Border.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                            <GradientStop Color="#F8FAFC" Offset="0"/>
                                                            <GradientStop Color="#F1F5F9" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Border.Background>
                                                    <TextBlock Text="ðŸ½ï¸" 
                                                              FontSize="48" 
                                                              HorizontalAlignment="Center" 
                                                              VerticalAlignment="Center"/>
                                                </Border>

                                                <!-- Recipe Info -->
                                                <StackPanel Grid.Row="1" Margin="16">
                                                    <TextBlock Text="{Binding Title}" 
                                                              FontWeight="Bold" 
                                                              FontSize="16" 
                                                              Foreground="#111827"
                                                              Margin="0,0,0,8"/>
                                                    <TextBlock Text="{Binding Description}" 
                                                              FontSize="12" 
                                                              Foreground="#6B7280" 
                                                              TextWrapping="Wrap"
                                                              Margin="0,0,0,12"/>
                                                    
                                                    <Grid Margin="0,0,0,12">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        
                                                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                                                            <TextBlock Text="â±ï¸" FontSize="12" Margin="0,0,4,0"/>
                                                            <TextBlock Text="{Binding CookTime}" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                        
                                                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                            <TextBlock Text="ðŸ‘¥" FontSize="12" Margin="0,0,4,0"/>
                                                            <TextBlock Text="{Binding Servings}" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                        
                                                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                                                            <TextBlock Text="â­" FontSize="12" Margin="0,0,4,0"/>
                                                            <TextBlock Text="{Binding Difficulty}" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                    </Grid>

                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                                        <Button Content="âœï¸" 
                                                               Width="32" Height="32"
                                                               Background="#3B82F6"
                                                               Foreground="White"
                                                               BorderThickness="0"
                                                               Margin="0,0,8,0"/>
                                                        <Button Content="ðŸ—‘ï¸" 
                                                               Width="32" Height="32"
                                                               Background="#EF4444"
                                                               Foreground="White"
                                                               BorderThickness="0"
                                                               Margin="0,0,8,0"
                                                               Command="{Binding DataContext.DeleteRecipeCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                                                        <Button Content="ðŸ“" 
                                                               Width="32" Height="32"
                                                               Background="#F59E0B"
                                                               Foreground="White"
                                                               BorderThickness="0"
                                                               Command="{Binding DataContext.AdjustServingsCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                    </StackPanel>

                    <!-- Recipes Content -->
                    <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Recipes}">
                        <!-- Header Section -->
                        <Grid Margin="0,0,0,24">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="ðŸ“š" FontSize="24" Margin="0,0,12,0"/>
                                <StackPanel>
                                    <TextBlock Text="My Recipes" 
                                              FontSize="28" 
                                              FontWeight="Bold" 
                                              Foreground="#111827"/>
                                    <TextBlock Text="Manage and organize your favorite recipes" 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              Margin="0,4,0,0"/>
                                </StackPanel>
                            </StackPanel>
                            
                            <Button Grid.Column="1" 
                                   Content="+ Add New Recipe" 
                                   Style="{StaticResource ModernButton}"
                                   Command="{Binding AddNewRecipeCommand}"
                                   Padding="20,12"
                                   FontSize="16"/>
                        </Grid>

                        <!-- Search and Filter Bar -->
                        <Border Background="White" 
                                CornerRadius="12" 
                                Padding="20" 
                                Margin="0,0,0,24"
                                >
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Search Box -->
                                <TextBox Grid.Column="0" 
                                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                         FontSize="14"
                                         Padding="16,12"
                                         BorderThickness="1"
                                         BorderBrush="#D1D5DB"
                                         Background="#F9FAFB"
                                         VerticalAlignment="Center"
                                         Margin="0,0,12,0">
                                    <TextBox.Style>
                                        <Style TargetType="TextBox">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="TextBox">
                                                        <Border Background="{TemplateBinding Background}" 
                                                                BorderBrush="{TemplateBinding BorderBrush}" 
                                                                BorderThickness="{TemplateBinding BorderThickness}" 
                                                                CornerRadius="8">
                                                            <ScrollViewer x:Name="PART_ContentHost" 
                                                                        Margin="{TemplateBinding Padding}"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="BorderBrush" Value="#10B981"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>
                                
                                <!-- Filter Dropdown -->
                                <ComboBox Grid.Column="1" 
                                          Width="120" 
                                          Height="44"
                                          FontSize="14"
                                          Padding="12,8"
                                          BorderThickness="1"
                                          BorderBrush="#D1D5DB"
                                          Background="White"
                                          Margin="0,0,12,0">
                                    <ComboBoxItem Content="All Recipes" IsSelected="True"/>
                                    <ComboBoxItem Content="Main Dishes"/>
                                    <ComboBoxItem Content="Desserts"/>
                                    <ComboBoxItem Content="Drinks"/>
                                </ComboBox>
                                
                                <!-- Sort Dropdown -->
                                <ComboBox Grid.Column="2" 
                                          Width="120" 
                                          Height="44"
                                          FontSize="14"
                                          Padding="12,8"
                                          BorderThickness="1"
                                          BorderBrush="#D1D5DB"
                                          Background="White">
                                    <ComboBoxItem Content="Newest" IsSelected="True"/>
                                    <ComboBoxItem Content="Oldest"/>
                                    <ComboBoxItem Content="A-Z"/>
                                    <ComboBoxItem Content="Z-A"/>
                                </ComboBox>
                            </Grid>
                        </Border>

                        <!-- Recipe Statistics -->
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Border Grid.Column="0" 
                                    Background="White" 
                                    CornerRadius="8" 
                                    Padding="16" 
                                    Margin="0,0,8,0"
                                    >
                                <StackPanel>
                                    <TextBlock Text="ðŸ“Š" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding Recipes.Count}" 
                                              FontSize="24" 
                                              FontWeight="Bold" 
                                              Foreground="#3B82F6"
                                              HorizontalAlignment="Center"/>
                                    <TextBlock Text="Total Recipes" 
                                              FontSize="12" 
                                              Foreground="#6B7280"
                                              HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Grid.Column="1" 
                                    Background="White" 
                                    CornerRadius="8" 
                                    Padding="16" 
                                    Margin="4,0"
                                    >
                                <StackPanel>
                                    <TextBlock Text="â±ï¸" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBlock Text="35" 
                                              FontSize="24" 
                                              FontWeight="Bold" 
                                              Foreground="#10B981"
                                              HorizontalAlignment="Center"/>
                                    <TextBlock Text="Avg Cook Time" 
                                              FontSize="12" 
                                              Foreground="#6B7280"
                                              HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Grid.Column="2" 
                                    Background="White" 
                                    CornerRadius="8" 
                                    Padding="16" 
                                    Margin="4,0"
                                    >
                                <StackPanel>
                                    <TextBlock Text="ðŸ”¥" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBlock Text="Easy" 
                                              FontSize="24" 
                                              FontWeight="Bold" 
                                              Foreground="#F59E0B"
                                              HorizontalAlignment="Center"/>
                                    <TextBlock Text="Most Common" 
                                              FontSize="12" 
                                              Foreground="#6B7280"
                                              HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Grid.Column="3" 
                                    Background="White" 
                                    CornerRadius="8" 
                                    Padding="16" 
                                    Margin="8,0,0,0"
                                    >
                                <StackPanel>
                                    <TextBlock Text="ðŸ¤–" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBlock Text="8" 
                                              FontSize="24" 
                                              FontWeight="Bold" 
                                              Foreground="#8B5CF6"
                                              HorizontalAlignment="Center"/>
                                    <TextBlock Text="AI Generated" 
                                              FontSize="12" 
                                              Foreground="#6B7280"
                                              HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                        
                        <!-- Recipe Grid -->
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl ItemsSource="{Binding Recipes}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="3" Margin="0,0,0,20"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource RecipeCard}" 
                                                Width="320" 
                                                Height="380" 
                                                Margin="8"
                                                Cursor="Hand">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="160"/>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <!-- Recipe Image -->
                                                <Border Grid.Row="0" 
                                                        CornerRadius="16,16,0,0">
                                                    <Border.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                            <GradientStop Color="#F8FAFC" Offset="0"/>
                                                            <GradientStop Color="#F1F5F9" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Border.Background>
                                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                                        <TextBlock Text="ðŸ½ï¸" 
                                                                  FontSize="64" 
                                                                  HorizontalAlignment="Center"/>
                                                        <TextBlock Text="Recipe Image" 
                                                                  FontSize="12" 
                                                                  Foreground="#6B7280"
                                                                  HorizontalAlignment="Center"
                                                                  Margin="0,4,0,0"/>
                                                    </StackPanel>
                                                </Border>

                                                <!-- Recipe Info -->
                                                <StackPanel Grid.Row="1" Margin="20,16,20,0">
                                                    <TextBlock Text="{Binding Title}" 
                                                              FontSize="18" 
                                                              FontWeight="Bold" 
                                                              Foreground="#111827"
                                                              TextWrapping="Wrap"
                                                              Margin="0,0,0,8"/>
                                                    <TextBlock Text="{Binding Description}" 
                                                              FontSize="13" 
                                                              Foreground="#6B7280"
                                                              TextWrapping="Wrap"
                                                              MaxHeight="60"
                                                              Margin="0,0,0,12"/>
                                                    
                                                    <!-- Recipe Meta Info -->
                                                    <Grid Margin="0,0,0,12">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        
                                                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                                                            <TextBlock Text="â±ï¸" FontSize="14" Margin="0,0,6,0"/>
                                                            <TextBlock Text="{Binding CookTime}" FontSize="13" Foreground="#6B7280"/>
                                                            <TextBlock Text=" min" FontSize="13" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                        
                                                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                            <TextBlock Text="ðŸ”¥" FontSize="14" Margin="0,0,6,0"/>
                                                            <TextBlock Text="{Binding Difficulty}" FontSize="13" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                    </Grid>
                                                </StackPanel>

                                                <!-- Action Buttons -->
                                                <Border Grid.Row="2" 
                                                        Background="#F8FAFC" 
                                                        CornerRadius="0,0,16,16"
                                                        Padding="20,12">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        
                                                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                                                            <Button Content="âœï¸" 
                                                                   Width="36" Height="36"
                                                                   Background="#3B82F6"
                                                                   Foreground="White"
                                                                   BorderThickness="0"
                                                                   Margin="0,0,8,0"
                                                                   Command="{Binding DataContext.EditRecipeCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                   CommandParameter="{Binding}"
                                                                   ToolTip="Edit Recipe"/>
                                                            <Button Content="ðŸ—‘ï¸" 
                                                                   Width="36" Height="36"
                                                                   Background="#EF4444"
                                                                   Foreground="White"
                                                                   BorderThickness="0"
                                                                   Margin="0,0,8,0"
                                                                   Command="{Binding DataContext.DeleteRecipeCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                   ToolTip="Delete Recipe"/>
                                                            <Button Content="ðŸ“" 
                                                                   Width="36" Height="36"
                                                                   Background="#F59E0B"
                                                                   Foreground="White"
                                                                   BorderThickness="0"
                                                                   ToolTip="Adjust Servings"/>
                                                        </StackPanel>
                                                        
                                                        <Button Grid.Column="1" 
                                                                Content="View Details â†’" 
                                                                Background="Transparent"
                                                                Foreground="#10B981"
                                                                BorderThickness="0"
                                                                FontSize="12"
                                                                FontWeight="SemiBold"
                                                                Padding="8,4"
                                                                Cursor="Hand">
                                                            <Button.Style>
                                                                <Style TargetType="Button">
                                                                    <Setter Property="Template">
                                                                        <Setter.Value>
                                                                            <ControlTemplate TargetType="Button">
                                                                                <TextBlock Text="{TemplateBinding Content}" 
                                                                                          Foreground="{TemplateBinding Foreground}"
                                                                                          FontSize="{TemplateBinding FontSize}"
                                                                                          FontWeight="{TemplateBinding FontWeight}"
                                                                                          Padding="{TemplateBinding Padding}">
                                                                                    <TextBlock.Style>
                                                                                        <Style TargetType="TextBlock">
                                                                                            <Style.Triggers>
                                                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                                                    <Setter Property="TextDecorations" Value="Underline"/>
                                                                                                </Trigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </TextBlock.Style>
                                                                                </TextBlock>
                                                                            </ControlTemplate>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </Style>
                                                            </Button.Style>
                                                        </Button>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </StackPanel>

                    <!-- Ingredients Content -->
                    <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Ingredients}">
                        <TextBlock Text="ðŸ¥˜ My Ingredients" 
                                  FontSize="24" 
                                  FontWeight="Bold" 
                                  Foreground="#111827"
                                  Margin="0,0,0,20"/>
                        
                        <Button Content="âž• Add New Ingredient" 
                               Style="{StaticResource ModernButton}"
                               HorizontalAlignment="Left"
                               Margin="0,0,0,20"
                               Command="{Binding AddNewIngredientCommand}"/>
                        
                        <ItemsControl ItemsSource="{Binding Ingredients}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,12">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="{Binding Name}" 
                                                          FontSize="18" 
                                                          FontWeight="SemiBold" 
                                                          Foreground="#111827"/>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Quantity}" 
                                                              FontSize="14" 
                                                              Foreground="#6B7280"/>
                                                    <TextBlock Text=" " 
                                                              FontSize="14" 
                                                              Foreground="#6B7280"/>
                                                    <TextBlock Text="{Binding Unit}" 
                                                              FontSize="14" 
                                                              Foreground="#6B7280"/>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                <Button Content="âœï¸" 
                                                       Width="32" Height="32"
                                                       Background="#3B82F6"
                                                       Foreground="White"
                                                       BorderThickness="0"
                                                       Margin="0,0,8,0"
                                                       Command="{Binding DataContext.EditIngredientCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                       CommandParameter="{Binding}"/>
                                                       <Button Content="ðŸ—‘ï¸" 
                                                               Width="32" Height="32"
                                                               Background="#EF4444"
                                                               Foreground="White"
                                                               BorderThickness="0"
                                                               Command="{Binding DataContext.DeleteIngredientCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                               CommandParameter="{Binding}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>

                    <!-- AI Features Content -->
                    <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=AI}">
                        <TextBlock Text="ðŸ¤– AI Features" 
                                  FontSize="24" 
                                  FontWeight="Bold" 
                                  Foreground="#111827"
                                  Margin="0,0,0,20"/>
                        
                        <!-- AI Features Grid -->
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Chef Judge -->
                            <Border Grid.Row="0" Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="ðŸŽ¯ Chef Judge" 
                                              FontSize="20" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="Upload a photo of your dish and get AI-powered feedback on presentation, technique, and suggestions for improvement." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                    <Button Content="ðŸ“¸ Upload Photo &amp; Judge" 
                                           Style="{StaticResource ModernButton}"
                                           Command="{Binding JudgeDishCommand}"
                                           HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Recipe Generation -->
                            <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="âœ¨ Generate Recipe" 
                                              FontSize="20" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="Let AI create a custom recipe based on your available ingredients and preferences." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                    <Button Content="ðŸŽ² Generate New Recipe" 
                                           Style="{StaticResource ModernButton}"
                                           Command="{Binding GenerateRecipeCommand}"
                                           HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Border>

                            <!-- Smart Shopping List -->
                            <Border Grid.Row="2" Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="ðŸ›’ Smart Shopping List" 
                                              FontSize="20" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="AI analyzes your recipes and creates an optimized shopping list with quantities and store layout suggestions." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                    <Button Content="ðŸ“‹ Generate Shopping List" 
                                           Style="{StaticResource ModernButton}"
                                           Command="{Binding GenerateShoppingListCommand}"
                                           HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Border>

                            <!-- Nutrition Analysis -->
                            <Border Grid.Row="3" Style="{StaticResource CardStyle}">
                                <StackPanel>
                                    <TextBlock Text="ðŸ¥— Nutrition Analysis" 
                                              FontSize="20" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="Get detailed nutritional information and health recommendations for your recipes using AI analysis." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                    <Button Content="ðŸ“Š Analyze Nutrition" 
                                           Style="{StaticResource ModernButton}"
                                           Command="{Binding AnalyzeNutritionCommand}"
                                           HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>

                    <!-- Analytics Content -->
                    <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Analytics}">
                        <TextBlock Text="ðŸ“Š Analytics Dashboard" 
                                  FontSize="24" 
                                  FontWeight="Bold" 
                                  Foreground="#111827"
                                  Margin="0,0,0,20"/>
                        
                        <!-- Statistics Cards -->
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Border Grid.Column="0" Style="{StaticResource CardStyle}" Margin="0,0,8,0">
                                <StackPanel>
                                    <TextBlock Text="ðŸ“ˆ Total Recipes" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding TotalRecipes}" 
                                              FontSize="28" 
                                              FontWeight="Bold"
                                              Foreground="#3B82F6"
                                              HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Grid.Column="1" Style="{StaticResource CardStyle}" Margin="4,0">
                                <StackPanel>
                                    <TextBlock Text="ðŸ¥˜ Most Used Ingredient" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding MostUsedIngredient}" 
                                              FontSize="18" 
                                              FontWeight="Bold"
                                              Foreground="#10B981"
                                              HorizontalAlignment="Center"
                                              TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Grid.Column="2" Style="{StaticResource CardStyle}" Margin="4,0">
                                <StackPanel>
                                    <TextBlock Text="â±ï¸ Avg Cook Time" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding AverageCookTime, StringFormat={}{0:F0} min}" 
                                              FontSize="20" 
                                              FontWeight="Bold"
                                              Foreground="#F59E0B"
                                              HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Grid.Column="3" Style="{StaticResource CardStyle}" Margin="8,0,0,0">
                                <StackPanel>
                                    <TextBlock Text="ðŸŽ¯ AI Success Rate" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding SuccessRate, StringFormat={}{0:F1}%}" 
                                              FontSize="24" 
                                              FontWeight="Bold"
                                              Foreground="#8B5CF6"
                                              HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- Charts Grid -->
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="300"/>
                                <RowDefinition Height="300"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Recipe Trend Chart -->
                            <Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Style="{StaticResource CardStyle}" Margin="0,0,0,12">
                                <StackPanel>
                                    <TextBlock Text="ðŸ“ˆ Recipe Creation Trend (Last 7 Days)" 
                                              FontSize="18" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,12"/>
                                    <lvc:CartesianChart Series="{Binding RecipeTrendSeries}" 
                                                      Height="200"
                                                      Background="Transparent"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Ingredient Usage Chart -->
                            <Border Grid.Row="1" Grid.Column="0" Style="{StaticResource CardStyle}" Margin="0,0,8,12">
                                <StackPanel>
                                    <TextBlock Text="ðŸ¥• Top Ingredients Usage" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,12"/>
                                    <lvc:CartesianChart Series="{Binding IngredientUsageSeries}" 
                                                      Height="200"
                                                      Background="Transparent"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- AI Performance Chart -->
                            <Border Grid.Row="1" Grid.Column="1" Style="{StaticResource CardStyle}" Margin="8,0,0,12">
                                <StackPanel>
                                    <TextBlock Text="ðŸ¤– AI Performance" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,12"/>
                                    <lvc:PieChart Series="{Binding AIPerformanceSeries}" 
                                                  Height="200"
                                                  Background="Transparent"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Cook Time Distribution Chart -->
                            <Border Grid.Row="2" Grid.Column="0" Style="{StaticResource CardStyle}" Margin="0,0,8,0">
                                <StackPanel>
                                    <TextBlock Text="â° Cook Time Distribution" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,12"/>
                                    <lvc:CartesianChart Series="{Binding CookTimeDistributionSeries}" 
                                                      Height="200"
                                                      Background="Transparent"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- AI Insights Panel -->
                            <Border Grid.Row="2" Grid.Column="1" Style="{StaticResource CardStyle}" Margin="8,0,0,0">
                                <StackPanel>
                                    <TextBlock Text="ðŸŽ¯ AI Insights" 
                                              FontSize="16" 
                                              FontWeight="SemiBold" 
                                              Foreground="#111827"
                                              Margin="0,0,0,12"/>
                                    
                                    <StackPanel Margin="0,0,0,12">
                                        <TextBlock Text="AI Judgments:" 
                                                  FontSize="14" 
                                                  Foreground="#6B7280"
                                                  Margin="0,0,0,4"/>
                                        <TextBlock Text="{Binding AIJudgments}" 
                                                  FontSize="18" 
                                                  FontWeight="Bold"
                                                  Foreground="#3B82F6"/>
                                    </StackPanel>
                                    
                                    <StackPanel Margin="0,0,0,12">
                                        <TextBlock Text="Generated Recipes:" 
                                                  FontSize="14" 
                                                  Foreground="#6B7280"
                                                  Margin="0,0,0,4"/>
                                        <TextBlock Text="{Binding GeneratedRecipes}" 
                                                  FontSize="18" 
                                                  FontWeight="Bold"
                                                  Foreground="#10B981"/>
                                    </StackPanel>
                                    
                                    <Button Content="ðŸ“Š View AI Logs" 
                                           Background="#3B82F6"
                                           Foreground="White"
                                           Padding="12,8"
                                           FontSize="14"
                                           BorderThickness="0"
                                           Click="ViewLogsButton_Click"
                                           Margin="0,12,0,0"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>

                    <!-- Settings Content -->
                    <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Settings}">
                        <TextBlock Text="âš™ï¸ Settings" 
                                  FontSize="24" 
                                  FontWeight="Bold" 
                                  Foreground="#111827"
                                  Margin="0,0,0,20"/>
                        
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="ðŸ”§ Application Settings" 
                                          FontSize="18" 
                                          FontWeight="SemiBold" 
                                          Foreground="#111827"
                                          Margin="0,0,0,16"/>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <TextBlock Text="Theme:" 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              Width="100"
                                              VerticalAlignment="Center"/>
                                    <ComboBox Width="150" 
                                              SelectedItem="{Binding SelectedTheme}">
                                        <ComboBoxItem Content="Light"/>
                                        <ComboBoxItem Content="Dark"/>
                                    </ComboBox>
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <TextBlock Text="Language:" 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              Width="100"
                                              VerticalAlignment="Center"/>
                                    <ComboBox Width="150" 
                                              SelectedItem="{Binding SelectedLanguage}">
                                        <ComboBoxItem Content="English"/>
                                        <ComboBoxItem Content="Vietnamese"/>
                                    </ComboBox>
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <TextBlock Text="Notifications:" 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              Width="100"
                                              VerticalAlignment="Center"/>
                                    <CheckBox IsChecked="{Binding NotificationsEnabled}" 
                                              Content="Enable notifications"
                                              VerticalAlignment="Center"/>
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <TextBlock Text="Default Servings:" 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              Width="100"
                                              VerticalAlignment="Center"/>
                                    <TextBox Text="{Binding DefaultServings}" 
                                             Width="80" 
                                             Margin="10,0,0,0"
                                             VerticalAlignment="Center"/>
                                </StackPanel>
                                
                                <Button Content="ðŸ’¾ Save Settings" 
                                       Style="{StaticResource ModernButton}"
                                       Command="{Binding SaveSettingsCommand}"
                                       HorizontalAlignment="Left"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Grid>
        </Grid>
    </Grid>
</Window>
