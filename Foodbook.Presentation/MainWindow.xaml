<Window x:Class="Foodbook.Presentation.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Foodbook.Presentation"
        xmlns:converters="clr-namespace:Foodbook.Presentation.Converters"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
        Title="ðŸ½ï¸ FoodBook - AI-Powered Recipe Manager" 
        Height="800" Width="1600"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResize">

    <Window.Resources>
        <!-- Converters -->
        <converters:TabVisibilityConverter x:Key="TabVisibilityConverter"/>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>

        <!-- Gradient Background Brush -->
        <LinearGradientBrush x:Key="MainGradientBrush" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#667eea" Offset="0"/>
            <GradientStop Color="#764ba2" Offset="1"/>
        </LinearGradientBrush>

        <!-- ScrollViewer Style for Right Edge Scrollbar -->
        <Style x:Key="RightEdgeScrollViewer" TargetType="ScrollViewer">
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="Margin" Value="0,0,0,0"/>
            <Setter Property="Padding" Value="0,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ScrollContentPresenter Grid.Column="0" 
                                                  Content="{TemplateBinding Content}" 
                                                  ContentTemplate="{TemplateBinding ContentTemplate}"/>
                            <ScrollBar Grid.Column="1" 
                                      Name="PART_VerticalScrollBar"
                                      Orientation="Vertical"
                                      Value="{TemplateBinding VerticalOffset}"
                                      Maximum="{TemplateBinding ScrollableHeight}"
                                      ViewportSize="{TemplateBinding ViewportHeight}"
                                      Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Enhanced Modern Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#10B981"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,16"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="12" 
                                Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect Color="#000000" Opacity="0.2" BlurRadius="8" ShadowDepth="2"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#059669"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#047857"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Enhanced Card Style with Glass Effect -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="16"/>
            <Setter Property="Opacity" Value="0.95"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="6" Opacity="0.15" BlurRadius="25"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Enhanced Sidebar Button Style -->
        <Style x:Key="SidebarButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#6B7280"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,18"/>
            <Setter Property="Margin" Value="8,6"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="12" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F3F4F6"/>
                                <Setter Property="Foreground" Value="#374151"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Enhanced Active Sidebar Button Style -->
        <Style x:Key="ActiveSidebarButton" TargetType="Button" BasedOn="{StaticResource SidebarButton}">
            <Setter Property="Background" Value="#E0F2F1"/>
            <Setter Property="Foreground" Value="#10B981"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <!-- Enhanced Recipe Card Style -->
        <Style x:Key="RecipeCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Opacity" Value="0.95"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.12" BlurRadius="16"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Animated Gradient Background -->
        <Grid>
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#667eea" Offset="0"/>
                    <GradientStop Color="#764ba2" Offset="0.5"/>
                    <GradientStop Color="#f093fb" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
        </Grid>

        <!-- Floating Particles Effect -->
        <Canvas>
            <Ellipse Canvas.Left="100" Canvas.Top="100" Width="6" Height="6" Fill="White" Opacity="0.4"/>
            <Ellipse Canvas.Left="300" Canvas.Top="150" Width="8" Height="8" Fill="White" Opacity="0.3"/>
            <Ellipse Canvas.Left="500" Canvas.Top="80" Width="5" Height="5" Fill="White" Opacity="0.5"/>
            <Ellipse Canvas.Left="800" Canvas.Top="200" Width="7" Height="7" Fill="White" Opacity="0.4"/>
            <Ellipse Canvas.Left="1200" Canvas.Top="120" Width="6" Height="6" Fill="White" Opacity="0.3"/>
        </Canvas>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Enhanced Custom Title Bar -->
        <Border Grid.Row="0" Height="60" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#10B981" Offset="0"/>
                    <GradientStop Color="#059669" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <DropShadowEffect Color="#000000" Opacity="0.2" BlurRadius="10" ShadowDepth="2"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Enhanced Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="24,0,0,0">
                    <TextBlock Text="ðŸ½ï¸" FontSize="24" Margin="0,0,12,0"/>
                    <TextBlock Text="FoodBook" FontSize="22" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="âœ¨" FontSize="20" Margin="8,0,0,0" Opacity="0.8"/>
                </StackPanel>

                <!-- Window Controls -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="ðŸ—•" 
                           Background="Transparent" 
                           Foreground="White" 
                           BorderThickness="0" 
                           Width="40" Height="40"
                           FontSize="12"
                           Click="MinimizeButton_Click"
                           ToolTip="Minimize"/>
                    <Button Content="ðŸ—–" 
                           Background="Transparent" 
                           Foreground="White" 
                           BorderThickness="0" 
                           Width="40" Height="40"
                           FontSize="12"
                           Click="MaximizeButton_Click"
                           ToolTip="Maximize"
                           x:Name="MaximizeButton"/>
                    <Button Content="âœ•" 
                           Background="Transparent" 
                           Foreground="White" 
                           BorderThickness="0" 
                           Width="40" Height="40"
                           FontSize="12"
                           Click="CloseButton_Click"
                           ToolTip="Close"
                           MouseEnter="CloseButton_MouseEnter"
                           MouseLeave="CloseButton_MouseLeave"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main POS Layout -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Enhanced Left Sidebar - POS Navigation -->
            <Border Grid.Column="0" Background="#FFFFFF" CornerRadius="0,0,20,0"
                    Width="{Binding IsSidebarCollapsed, Converter={StaticResource SidebarWidthConverter}}"
                    RenderTransformOrigin="1,0"
                    Opacity="0.95">
                <Border.Effect>
                    <DropShadowEffect Color="#000000" Opacity="0.1" BlurRadius="15" ShadowDepth="3"/>
                </Border.Effect>
                <Border.RenderTransform>
                    <TranslateTransform x:Name="SidebarTransform"/>
                </Border.RenderTransform>
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsSidebarCollapsed}" Value="True">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="(Border.RenderTransform).(TranslateTransform.X)"
                                                           To="-220"
                                                           Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <PowerEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="(Border.RenderTransform).(TranslateTransform.X)"
                                                           To="0"
                                                           Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <PowerEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- FoodBook Logo -->
                    <Border Grid.Row="0" Padding="16,16,16,12" Background="#F8FAFC">
                        <Grid>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,8">
                                <TextBlock Text="ðŸ½ï¸" FontSize="24" Margin="0,0,8,0"/>
                                <TextBlock Text="FoodBook" FontSize="16" FontWeight="Bold" Foreground="#1F2937" VerticalAlignment="Center"
                                           Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                            </StackPanel>
                            <Button Content="â˜°" 
                                   Command="{Binding ToggleSidebarCommand}"
                                   Background="Transparent" 
                                   Foreground="#6B7280" 
                                   BorderThickness="0" 
                                   Width="32" Height="32"
                                   FontSize="16"
                                   HorizontalAlignment="Right"
                                   VerticalAlignment="Center"
                                   ToolTip="Toggle Sidebar"
                                   Margin="0,0,8,0"/>
                        </Grid>
                    </Border>

                    <!-- Navigation Menu -->
                    <StackPanel Grid.Row="1" Margin="8,4,8,4">
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Dashboard"
                           Margin="0,0,0,2"
                           ToolTip="Dashboard">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ " FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Dashboard" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Dashboard">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Recipes"
                           Margin="0,0,0,2"
                           ToolTip="My Recipes">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“š" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="My Recipes" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Recipes">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Ingredients"
                           Margin="0,0,0,2"
                           ToolTip="Ingredients">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ¥˜" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Ingredients" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Ingredients">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="AI"
                           Margin="0,0,0,2"
                           ToolTip="AI Chef">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ¤–" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="AI Chef" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="AI">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Analytics"
                           Margin="0,0,0,2"
                           ToolTip="Analytics">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“Š" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Analytics" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Analytics">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Settings"
                           Margin="0,0,0,2"
                           ToolTip="Settings">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="âš™ï¸" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Settings" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Settings">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>

                    <!-- User Profile -->
                    <Border Grid.Row="2" Background="#F8FAFC" CornerRadius="12" Margin="8,8,8,16" Padding="16"
                            Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}">
                        <StackPanel>
                            <TextBlock Text="ðŸ‘¤ User Profile" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <Ellipse Width="40" Height="40" Fill="#4CAF50" Margin="0,0,12,0"/>
                                <StackPanel>
                                    <TextBlock Text="{Binding CurrentUser.Username, StringFormat='Hello, {0}!'}" 
                                          FontSize="14" 
                                  FontWeight="SemiBold" 
                                          Foreground="#1F2937"/>
                                    <TextBlock Text="Ready to cook?" 
                                  FontSize="11" 
                                          Foreground="#6B7280"/>
                                </StackPanel>
                            </StackPanel>
                            <Button Content="ðŸšª Logout" 
                                Background="Transparent"
                                Foreground="#EF4444"
                                FontSize="10"
                                BorderThickness="0"
                                Padding="4,2"
                                Margin="0,8,0,0"
                                Click="Logout_Click"
                                Cursor="Hand"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- Center Content Area - Recipe Display -->
            <Grid Grid.Column="1" Margin="32,32,32,32">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>


                <!-- Tab Content -->
                <ScrollViewer Grid.Row="1" 
                             Style="{StaticResource RightEdgeScrollViewer}">
                    <StackPanel>
                        <!-- Dashboard Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Dashboard}">
                            <TextBlock Text="ðŸ  Dashboard" FontSize="28" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,24"/>
                            
                            <!-- Enhanced Quick Stats with Gradients -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Total Recipes Card -->
                                <Border Grid.Column="0" CornerRadius="16" Padding="24" Margin="0,0,6,0" Cursor="Hand">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#4CAF50" Offset="0"/>
                                            <GradientStop Color="#45A049" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="8" Opacity="0.3" BlurRadius="20"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“š" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12" RenderTransformOrigin="0.5,0.5">
                                            <TextBlock.RenderTransform>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TextBlock.RenderTransform>
                                            <TextBlock.Triggers>
                                                <EventTrigger RoutedEvent="MouseEnter">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.2" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.2" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                                <EventTrigger RoutedEvent="MouseLeave">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                            </TextBlock.Triggers>
                                        </TextBlock>
                                        <TextBlock Text="{Binding Recipes.Count}" FontSize="36" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="Total Recipes" FontSize="16" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                </StackPanel>
                            </Border>

                                <!-- Avg Cook Time Card -->
                                <Border Grid.Column="1" CornerRadius="16" Padding="24" Margin="3,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF6B35" Offset="0"/>
                                            <GradientStop Color="#F7931E" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF6B35" Direction="270" ShadowDepth="8" Opacity="0.3" BlurRadius="20"/>
                                    </Border.Effect>
                                <StackPanel>
                                        <TextBlock Text="â±ï¸" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12" RenderTransformOrigin="0.5,0.5">
                                            <TextBlock.RenderTransform>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TextBlock.RenderTransform>
                                            <TextBlock.Triggers>
                                                <EventTrigger RoutedEvent="MouseEnter">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.2" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.2" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                                <EventTrigger RoutedEvent="MouseLeave">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                            </TextBlock.Triggers>
                                        </TextBlock>
                                        <TextBlock Text="{Binding MyAverageCookTime, StringFormat={}{0:F0} min}" FontSize="36" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="Avg Cook Time" FontSize="16" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Most Common Difficulty Card -->
                                <Border Grid.Column="2" CornerRadius="16" Padding="24" Margin="3,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#E91E63" Offset="0"/>
                                            <GradientStop Color="#C2185B" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#E91E63" Direction="270" ShadowDepth="8" Opacity="0.3" BlurRadius="20"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ”¥" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12" RenderTransformOrigin="0.5,0.5">
                                            <TextBlock.RenderTransform>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TextBlock.RenderTransform>
                                            <TextBlock.Triggers>
                                                <EventTrigger RoutedEvent="MouseEnter">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.2" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.2" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                                <EventTrigger RoutedEvent="MouseLeave">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                            </TextBlock.Triggers>
                                        </TextBlock>
                                        <TextBlock Text="{Binding MyMostCommonDifficulty}" FontSize="36" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="Most Common" FontSize="16" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                    </StackPanel>
                                </Border>
                                
                                <!-- AI Generated Card -->
                                <Border Grid.Column="3" CornerRadius="16" Padding="24" Margin="6,0,0,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#9C27B0" Offset="0"/>
                                            <GradientStop Color="#7B1FA2" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#9C27B0" Direction="270" ShadowDepth="8" Opacity="0.3" BlurRadius="20"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ¤–" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12" RenderTransformOrigin="0.5,0.5">
                                            <TextBlock.RenderTransform>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TextBlock.RenderTransform>
                                            <TextBlock.Triggers>
                                                <EventTrigger RoutedEvent="MouseEnter">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.2" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.2" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                                <EventTrigger RoutedEvent="MouseLeave">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" To="1" Duration="0:0:0.2"/>
                                                            <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY" To="1" Duration="0:0:0.2"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                            </TextBlock.Triggers>
                                        </TextBlock>
                                        <TextBlock Text="{Binding MyAIGeneratedRecipes}" FontSize="36" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="AI Generated" FontSize="16" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                </StackPanel>
                            </Border>
                            </Grid>

                            <!-- Enhanced Recipe Categories Overview -->
                            <Border CornerRadius="20" Padding="32" Margin="0,0,0,24">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#667eea" Offset="0"/>
                                        <GradientStop Color="#764ba2" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect Color="#667eea" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                </Border.Effect>
                                <StackPanel>
                                    <TextBlock Text="ðŸ½ï¸ Recipe Categories" FontSize="24" FontWeight="Bold" Foreground="White" Margin="0,0,0,20" HorizontalAlignment="Center"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Main Dishes -->
                                        <Border Grid.Column="0" CornerRadius="12" Padding="16" Margin="0,0,8,0" Cursor="Hand">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#FF6B6B" Offset="0"/>
                                                    <GradientStop Color="#FF8E8E" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel HorizontalAlignment="Center">
                                                <TextBlock Text="ðŸ–" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                <TextBlock Text="Main Dishes" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Text="16 recipes" FontSize="12" Foreground="White" HorizontalAlignment="Center" Margin="0,4,0,0" Opacity="0.9"/>
                                        </StackPanel>
                                        </Border>
                                        
                                        <!-- Desserts -->
                                        <Border Grid.Column="1" CornerRadius="12" Padding="16" Margin="4,0" Cursor="Hand">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#FFB74D" Offset="0"/>
                                                    <GradientStop Color="#FFCC80" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel HorizontalAlignment="Center">
                                                <TextBlock Text="ðŸ°" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                <TextBlock Text="Desserts" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Text="1 recipe" FontSize="12" Foreground="White" HorizontalAlignment="Center" Margin="0,4,0,0" Opacity="0.9"/>
                                        </StackPanel>
                                        </Border>
                                        
                                        <!-- Appetizers -->
                                        <Border Grid.Column="2" CornerRadius="12" Padding="16" Margin="4,0" Cursor="Hand">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#4CAF50" Offset="0"/>
                                                    <GradientStop Color="#66BB6A" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel HorizontalAlignment="Center">
                                                <TextBlock Text="ðŸ¥—" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                <TextBlock Text="Appetizers" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Text="1 recipe" FontSize="12" Foreground="White" HorizontalAlignment="Center" Margin="0,4,0,0" Opacity="0.9"/>
                                        </StackPanel>
                                        </Border>
                                        
                                        <!-- Side Dishes -->
                                        <Border Grid.Column="3" CornerRadius="12" Padding="16" Margin="8,0,0,0" Cursor="Hand">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#AB47BC" Offset="0"/>
                                                    <GradientStop Color="#BA68C8" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel HorizontalAlignment="Center">
                                                <TextBlock Text="ðŸ¥”" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                <TextBlock Text="Side Dishes" FontSize="14" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Text="1 recipe" FontSize="12" Foreground="White" HorizontalAlignment="Center" Margin="0,4,0,0" Opacity="0.9"/>
                                        </StackPanel>
                                        </Border>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Enhanced Recent Recipes -->
                            <Border CornerRadius="20" Padding="32">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#f093fb" Offset="0"/>
                                        <GradientStop Color="#f5576c" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect Color="#f093fb" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                </Border.Effect>
                                <StackPanel>
                                    <TextBlock Text="ðŸ”¥ Recent Recipes" FontSize="24" FontWeight="Bold" Foreground="White" Margin="0,0,0,20" HorizontalAlignment="Center"/>
                                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                                        <StackPanel Orientation="Horizontal">
                                            <!-- Spaghetti Carbonara -->
                                            <Border CornerRadius="12" Padding="16,12" Margin="0,0,12,0" Cursor="Hand">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#FF6B6B" Offset="0"/>
                                                        <GradientStop Color="#FF8E8E" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ" FontSize="16" Margin="0,0,8,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Spaghetti Carbonara" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                        <TextBlock Text="30 min â†’ Ready" FontSize="12" Foreground="White" Opacity="0.9"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Chicken Stir Fry -->
                                            <Border CornerRadius="12" Padding="16,12" Margin="0,0,12,0" Cursor="Hand">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#4CAF50" Offset="0"/>
                                                        <GradientStop Color="#66BB6A" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ—" FontSize="16" Margin="0,0,8,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Chicken Stir Fry" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                        <TextBlock Text="20 min â†’ Ready" FontSize="12" Foreground="White" Opacity="0.9"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Chocolate Cake -->
                                            <Border CornerRadius="12" Padding="16,12" Margin="0,0,12,0" Cursor="Hand">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#8D6E63" Offset="0"/>
                                                        <GradientStop Color="#A1887F" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ°" FontSize="16" Margin="0,0,8,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Chocolate Cake" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                        <TextBlock Text="45 min â†’ Ready" FontSize="12" Foreground="White" Opacity="0.9"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Beef Tacos -->
                                            <Border CornerRadius="12" Padding="16,12" Margin="0,0,12,0" Cursor="Hand">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#FF9800" Offset="0"/>
                                                        <GradientStop Color="#FFB74D" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŒ®" FontSize="16" Margin="0,0,8,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Beef Tacos" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                        <TextBlock Text="25 min â†’ Ready" FontSize="12" Foreground="White" Opacity="0.9"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Fish & Chips -->
                                            <Border CornerRadius="12" Padding="16,12" Margin="0,0,12,0" Cursor="Hand">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#2196F3" Offset="0"/>
                                                        <GradientStop Color="#42A5F5" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŸ" FontSize="16" Margin="0,0,8,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Fish &amp; Chips" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                        <TextBlock Text="35 min â†’ Ready" FontSize="12" Foreground="White" Opacity="0.9"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Pasta Primavera -->
                                            <Border CornerRadius="12" Padding="16,12" Margin="0,0,12,0" Cursor="Hand">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#4CAF50" Offset="0"/>
                                                        <GradientStop Color="#66BB6A" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ" FontSize="16" Margin="0,0,8,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Pasta Primavera" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                        <TextBlock Text="20 min â†’ Ready" FontSize="12" Foreground="White" Opacity="0.9"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                        </StackPanel>
                                    </ScrollViewer>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Recipes Content - Redesigned -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Recipes}">
                            <!-- Header Section -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Title and Stats -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="ðŸ“š Recipe Collection" FontSize="28" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,6"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Recipes.Count, StringFormat={}{0} recipes}" FontSize="14" Foreground="#6B7280" Margin="0,0,12,0"/>
                                        <TextBlock Text="â€¢" FontSize="14" Foreground="#D1D5DB" Margin="0,0,12,0"/>
                                        <TextBlock Text="Updated: Today" FontSize="14" Foreground="#6B7280"/>
                                    </StackPanel>
                                </StackPanel>
                                
                                <!-- Quick Actions -->
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Button Content="âž• Add Recipe" 
                                            Background="#4CAF50"
                                            Foreground="White"
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            Padding="20,12"
                                            BorderThickness="0"
                                            Margin="0,0,8,0"
                                            Command="{Binding AddRecipeCommand}"/>
                                    <Button Content="ðŸ“Š Analytics" 
                                            Background="#8B5CF6"
                                            Foreground="White"
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            Padding="20,12"
                                            BorderThickness="0"
                                            Command="{Binding ViewRecipeAnalyticsCommand}"/>
                                </StackPanel>
                            </Grid>

                            <!-- Enhanced Search and Filter Section -->
                            <Border Background="White" CornerRadius="12" Padding="20" Margin="0,0,0,16">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Search Bar -->
                                    <Border Grid.Row="0" Background="#F8F9FA" CornerRadius="12" Padding="16,12" Margin="0,0,0,16">
                                        <Grid>
                                            <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                                    Background="Transparent"
                                                    BorderThickness="0"
                                                    FontSize="16"
                                                    VerticalAlignment="Center"
                                                    Padding="0,0,40,0"/>
                                            <TextBlock Text="ðŸ” Search recipes, ingredients, or cooking methods..." 
                                                      Foreground="#9CA3AF" 
                                                      FontSize="16"
                                                      VerticalAlignment="Center"
                                                      IsHitTestVisible="False"
                                                      Margin="0,0,40,0">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SearchText}" Value="">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding SearchText}" Value="{x:Null}">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                            <Button Content="ðŸ”" 
                                                   Background="#4CAF50"
                                                   Foreground="White"
                                                   Width="32" Height="32"
                                                   FontSize="14" 
                                                   BorderThickness="0"
                                                   HorizontalAlignment="Right"
                                                   Command="{Binding SearchRecipesCommand}"/>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Advanced Filters -->
                                    <Grid Grid.Row="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Category Filter Tabs -->
                                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                                            <!-- All Recipes Tab -->
                                            <Button Padding="16,10" Margin="0,0,8,0" Cursor="Hand" 
                                                    Command="{Binding FilterByCategoryCommand}" CommandParameter="All"
                                                    BorderThickness="0">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Background" Value="#4CAF50"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Button">
                                                                    <Border Background="{TemplateBinding Background}" 
                                                                            CornerRadius="20" 
                                                                            Padding="{TemplateBinding Padding}">
                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                    </Border>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SelectedCategory}" Value="All">
                                                                <Setter Property="Background" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding SelectedCategory}" Value="">
                                                                <Setter Property="Background" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                                <TextBlock Text="{Binding Recipes.Count, StringFormat={}All ({0})}" 
                                                              Foreground="White" 
                                                              FontWeight="Bold"
                                                              FontSize="14"/>
                                            </Button>
                                            
                                            <!-- Main Dishes Tab -->
                                            <Button Padding="16,10" Margin="0,0,8,0" Cursor="Hand"
                                                    Command="{Binding FilterByCategoryCommand}" CommandParameter="Main Dishes"
                                                    BorderThickness="0">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Background" Value="#F1F5F9"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Button">
                                                                    <Border Background="{TemplateBinding Background}" 
                                                                            CornerRadius="20" 
                                                                            Padding="{TemplateBinding Padding}">
                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SelectedCategory}" Value="Main Dishes">
                                                                <Setter Property="Background" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                                    <TextBlock Text="ðŸ½ï¸ Main Dishes" 
                                                             Foreground="#374151" 
                                                             FontWeight="Medium"
                                                             FontSize="14"/>
                                            </Button>
                                            
                                            <!-- Desserts Tab -->
                                            <Button Padding="16,10" Margin="0,0,8,0" Cursor="Hand"
                                                    Command="{Binding FilterByCategoryCommand}" CommandParameter="Desserts"
                                                    BorderThickness="0">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Background" Value="#F1F5F9"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Button">
                                                                    <Border Background="{TemplateBinding Background}" 
                                                                            CornerRadius="20" 
                                                                            Padding="{TemplateBinding Padding}">
                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SelectedCategory}" Value="Desserts">
                                                                <Setter Property="Background" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                                    <TextBlock Text="ðŸ° Desserts" 
                                                             Foreground="#374151" 
                                                             FontWeight="Medium"
                                                             FontSize="14"/>
                                            </Button>
                                            
                                            <!-- Quick Recipes Tab -->
                                            <Button Padding="16,10" Margin="0,0,8,0" Cursor="Hand"
                                                    Command="{Binding FilterByCategoryCommand}" CommandParameter="Quick"
                                                    BorderThickness="0">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Background" Value="#F1F5F9"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Button">
                                                                    <Border Background="{TemplateBinding Background}" 
                                                                            CornerRadius="20" 
                                                                            Padding="{TemplateBinding Padding}">
                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SelectedCategory}" Value="Quick">
                                                                <Setter Property="Background" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                                    <TextBlock Text="âš¡ Quick" 
                                                             Foreground="#374151" 
                                                             FontWeight="Medium"
                                                             FontSize="14"/>
                                            </Button>
                                            </StackPanel>
                                        
                                        <!-- Sort Options -->
                                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                                            <TextBlock Text="Sort:" FontSize="14" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                            <ComboBox SelectedItem="{Binding SortBy}" Width="140" Height="36" FontSize="14">
                                                <ComboBoxItem Content="Name A-Z"/>
                                                <ComboBoxItem Content="Name Z-A"/>
                                                <ComboBoxItem Content="Time"/>
                                                <ComboBoxItem Content="Time Desc"/>
                                                <ComboBoxItem Content="Difficulty"/>
                                                <ComboBoxItem Content="Difficulty Desc"/>
                                                <ComboBoxItem Content="Date Created"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </Grid>
                            </Grid>
                            </Border>

                            <!-- Recipe Grid with Enhanced Cards -->
                            <Grid>
                                    <ItemsControl ItemsSource="{Binding Recipes}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                            <UniformGrid Columns="4" Margin="0,0,0,24"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                        <Border Background="White" 
                                                CornerRadius="12" 
                                                Padding="0" 
                                                Margin="6"
                                                Cursor="Hand"
                                                Width="280" 
                                                Height="320">
                                            <Border.Effect>
                                                <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                            </Border.Effect>
                                            
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                    <RowDefinition Height="140"/>
                                                            <RowDefinition Height="*"/>
                                                        <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>

                                                <!-- Recipe Image -->
                                                <Border Grid.Row="0" CornerRadius="16,16,0,0" Background="#F8FAFC">
                                                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                                        <TextBlock Text="ðŸ½ï¸" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                        <TextBlock Text="Recipe Image" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                        </StackPanel>
                                                        </Border>

                                                <!-- Recipe Info -->
                                                <StackPanel Grid.Row="1" Margin="16,16,16,0">
                                                            <TextBlock Text="{Binding Title}" 
                                                              FontSize="16" 
                                                              FontWeight="Bold" 
                                                              Foreground="#111827"
                                                              TextWrapping="Wrap"
                                                              Margin="0,0,0,8"
                                                              MaxHeight="40"/>
                                                    
                                                            <TextBlock Text="{Binding Description}" 
                                                              FontSize="13" 
                                                              Foreground="#6B7280" 
                                                              TextWrapping="Wrap"
                                                              MaxHeight="50"
                                                              Margin="0,0,0,12"/>

                                                    <!-- Recipe Stats -->
                                                    <Grid Margin="0,0,0,12">
                                                                <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>

                                                                <StackPanel Grid.Column="0" Orientation="Horizontal">
                                                            <TextBlock Text="â±ï¸" FontSize="12" Margin="0,0,4,0"/>
                                                            <TextBlock Text="{Binding CookTime}" FontSize="12" Foreground="#374151" FontWeight="Medium"/>
                                                            <TextBlock Text=" min" FontSize="12" Foreground="#6B7280"/>
                                                                </StackPanel>

                                                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                            <TextBlock Text="ðŸ”¥" FontSize="12" Margin="0,0,4,0"/>
                                                            <TextBlock Text="{Binding Difficulty}" FontSize="12" Foreground="#374151" FontWeight="Medium"/>
                                                        </StackPanel>

                                                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                                                            <TextBlock Text="ðŸ‘¥" FontSize="12" Margin="0,0,4,0"/>
                                                            <TextBlock Text="4" FontSize="12" Foreground="#374151" FontWeight="Medium"/>
                                                            <TextBlock Text=" people" FontSize="12" Foreground="#6B7280"/>
                                                                </StackPanel>
                                                            </Grid>
                                                    </StackPanel>

                                                <!-- Action Buttons -->
                                                <Border Grid.Row="2" Background="#F8FAFC" CornerRadius="0,0,16,16" Padding="16,12">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        
                                                        <Button Grid.Column="0" Content="ðŸ‘ï¸ View" 
                                                                Background="#4CAF50"
                                                                Foreground="White"
                                                                FontSize="13"
                                                                FontWeight="SemiBold"
                                                                Padding="12,8"
                                                                BorderThickness="0"
                                                                Margin="0,0,4,0"
                                                                Command="{Binding DataContext.ViewRecipeCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                CommandParameter="{Binding}"/>
                                                        
                                                        <Button Grid.Column="1" Content="âœï¸ Edit" 
                                                                Background="#6B7280"
                                                                Foreground="White"
                                                                FontSize="13"
                                                                FontWeight="SemiBold"
                                                                Padding="12,8"
                                                                BorderThickness="0"
                                                                Margin="4,0,0,0"
                                                                Command="{Binding DataContext.EditRecipeCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                CommandParameter="{Binding}"/>
                                                    </Grid>
                                                    </Border>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                            </Grid>

                            <!-- Empty State -->
                            <Border Background="White" CornerRadius="16" Padding="40" Margin="0,40,0,0" 
                                    Visibility="{Binding Recipes.Count, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ½ï¸" FontSize="64" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                                    <TextBlock Text="No recipes yet" FontSize="24" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBlock Text="Start building your recipe collection!" FontSize="16" Foreground="#6B7280" HorizontalAlignment="Center" TextWrapping="Wrap" Margin="0,0,0,24"/>
                                    <Button Content="âž• Add Your First Recipe" 
                                            Background="#4CAF50"
                                            Foreground="White"
                                            FontSize="16"
                                            FontWeight="SemiBold"
                                            Padding="24,16"
                                            BorderThickness="0"
                                            Command="{Binding AddRecipeCommand}"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Ingredients Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Ingredients}">
                            <!-- Header Section -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Title and Stats -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="ðŸ¥˜ My Ingredients" FontSize="32" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Ingredients.Count, StringFormat={}{0} ingredients}" FontSize="16" Foreground="#6B7280" Margin="0,0,16,0"/>
                                        <TextBlock Text="â€¢" FontSize="16" Foreground="#D1D5DB" Margin="0,0,16,0"/>
                                        <TextBlock Text="Updated: Today" FontSize="16" Foreground="#6B7280"/>
                                    </StackPanel>
                                </StackPanel>
                                
                                <!-- Quick Actions -->
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Button Content="âž• Add Ingredient" 
                                            Background="#4CAF50"
                                            Foreground="White"
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            Padding="20,12"
                                            BorderThickness="0"
                                            Margin="0,0,8,0"
                                            Command="{Binding AddIngredientCommand}"/>
                                    <Button Content="ðŸ“Š Analytics" 
                                            Background="#8B5CF6"
                                            Foreground="White"
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            Padding="20,12"
                                            BorderThickness="0"
                                            Command="{Binding ViewIngredientAnalyticsCommand}"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Ingredient Filter Section -->
                            <Border Background="White" CornerRadius="16" Padding="24" Margin="0,0,0,20">
                                <Grid>
                                <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Category Filter Tabs -->
                                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                                        <!-- All Ingredients Tab -->
                                        <Button Padding="12,8" Margin="0,0,6,0" Cursor="Hand" 
                                                Command="{Binding NavigateToAllIngredientsCommand}"
                                                BorderThickness="0">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#4CAF50"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        CornerRadius="16" 
                                                                        Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedIngredientCategory}" Value="All">
                                                            <Setter Property="Background" Value="#4CAF50"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding SelectedIngredientCategory}" Value="">
                                                            <Setter Property="Background" Value="#4CAF50"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="{Binding Ingredients.Count, StringFormat={}All ({0})}" 
                                                      Foreground="White" 
                                                      FontWeight="SemiBold"
                                                      FontSize="13"/>
                                        </Button>
                                        
                                        <!-- Proteins Tab -->
                                        <Button Padding="12,8" Margin="0,0,6,0" Cursor="Hand"
                                                Command="{Binding NavigateToProteinsCommand}"
                                                BorderThickness="0">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#F8F9FA"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        CornerRadius="16" 
                                                                        Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedIngredientCategory}" Value="Proteins">
                                                            <Setter Property="Background" Value="#4CAF50"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="ðŸ¥© Proteins" 
                                                     Foreground="#6B7280" 
                                                     FontWeight="Medium"
                                                     FontSize="13"/>
                                        </Button>
                                        
                                        <!-- Grains Tab -->
                                        <Button Padding="12,8" Margin="0,0,6,0" Cursor="Hand"
                                                Command="{Binding NavigateToGrainsCommand}"
                                                BorderThickness="0">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#F8F9FA"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        CornerRadius="16" 
                                                                        Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedIngredientCategory}" Value="Grains">
                                                            <Setter Property="Background" Value="#4CAF50"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="ðŸŒ¾ Grains" 
                                                     Foreground="#6B7280" 
                                                     FontWeight="Medium"
                                                     FontSize="13"/>
                                        </Button>
                                        
                                        <!-- Vegetables Tab -->
                                        <Button Padding="12,8" Margin="0,0,6,0" Cursor="Hand"
                                                Command="{Binding NavigateToVegetablesCommand}"
                                                BorderThickness="0">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#F8F9FA"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        CornerRadius="16" 
                                                                        Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedIngredientCategory}" Value="Vegetables">
                                                            <Setter Property="Background" Value="#4CAF50"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="ðŸ¥• Vegetables" 
                                                     Foreground="#6B7280" 
                                                     FontWeight="Medium"
                                                     FontSize="13"/>
                                        </Button>
                                        
                                        <!-- Spices Tab -->
                                        <Button Padding="12,8" Margin="0,0,6,0" Cursor="Hand"
                                                Command="{Binding NavigateToSpicesCommand}"
                                                BorderThickness="0">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#F8F9FA"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}" 
                                                                        CornerRadius="16" 
                                                                        Padding="{TemplateBinding Padding}">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedIngredientCategory}" Value="Spices">
                                                            <Setter Property="Background" Value="#4CAF50"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="ðŸŒ¶ï¸ Spices" 
                                                     Foreground="#6B7280" 
                                                     FontWeight="Medium"
                                                     FontSize="13"/>
                                        </Button>
                                    </StackPanel>
                                    
                                    <!-- Sort Options -->
                                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                                        <TextBlock Text="Sort:" FontSize="14" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <ComboBox SelectedItem="{Binding IngredientSortBy}" Width="140" Height="36" FontSize="14">
                                            <ComboBoxItem Content="Name A-Z"/>
                                            <ComboBoxItem Content="Name Z-A"/>
                                            <ComboBoxItem Content="Category"/>
                                            <ComboBoxItem Content="Date Added"/>
                                        </ComboBox>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- Ingredient Categories Overview -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Proteins -->
                                <Border Grid.Column="0" Background="White" CornerRadius="16" Padding="24" Margin="0,0,6,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ¥©" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                        <TextBlock Text="Proteins" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="10 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- Grains -->
                                <Border Grid.Column="1" Background="White" CornerRadius="16" Padding="24" Margin="3,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FFB74D" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸŒ¾" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                        <TextBlock Text="Grains" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="8 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- Vegetables -->
                                <Border Grid.Column="2" Background="White" CornerRadius="16" Padding="24" Margin="3,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ¥•" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                        <TextBlock Text="Vegetables" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="14 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- Spices -->
                                <Border Grid.Column="3" Background="White" CornerRadius="16" Padding="24" Margin="8,0,0,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#9C27B0" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ§‚" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                        <TextBlock Text="Spices" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="25 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Detailed Ingredients List -->
                                                <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                <!-- Left Column - Protein Sources -->
                                <StackPanel Grid.Column="0" Margin="0,0,12,0">
                                    <Border Background="White" CornerRadius="16" Padding="24">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                        </Border.Effect>
                                    <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                                <TextBlock Text="ðŸ‘¨â€ðŸ³" FontSize="20" Margin="0,0,8,0"/>
                                                <TextBlock Text="Protein Sources" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            </StackPanel>
                                        
                                            <!-- Chicken Breast -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                    <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ—" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Chicken Breast" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="High protein, low fat" FontSize="12" Foreground="#6B7280"/>
                                                            </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Salmon Fillet -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŸ" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Salmon Fillet" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Omega-3 fatty acids" FontSize="12" Foreground="#6B7280"/>
                                                            </StackPanel>
                                                    </StackPanel>
                                        </Border>
                                            
                                            <!-- Beef Tenderloin -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¥©" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Beef Tenderloin" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Iron-rich" FontSize="12" Foreground="#6B7280"/>
                        </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Shrimp -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¦" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Shrimp" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Low calorie" FontSize="12" Foreground="#6B7280"/>
                                                            </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Eggs -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¥š" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Eggs" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Complete protein" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                                    </Border>
                                    </StackPanel>
                                </Border>
                                </StackPanel>
                                
                                <!-- Right Column - Spices & Herbs -->
                                <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                    <Border Background="White" CornerRadius="16" Padding="24">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#9C27B0" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                        </Border.Effect>
                                    <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                                <TextBlock Text="ðŸ§‚" FontSize="20" Margin="0,0,8,0"/>
                                                <TextBlock Text="Spices &amp; Herbs" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            </StackPanel>
                                        
                                            <!-- Salt -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ§‚" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Salt" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Sodium chloride" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Black Pepper -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="âš«" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Black Pepper" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Piperine" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Turmeric -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                    <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŸ¡" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Turmeric" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Curcumin" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Basil -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŒ¿" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Basil" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Eugenol" FontSize="12" Foreground="#6B7280"/>
                                                </StackPanel>
                                                </StackPanel>
                                        </Border>
                                            
                                            <!-- Cayenne -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŒ¶ï¸" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Cayenne" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Capsaicin" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                    </StackPanel>
                                </Border>
                                </StackPanel>
                            </Grid>
                        </StackPanel>

                       <!-- AI Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=AI}">
                           <TextBlock Text="ðŸ¤– AI Chef &amp; Judge" FontSize="24" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,20"/>
                           
                            <Grid>
                               <Grid.ColumnDefinitions>
                                   <ColumnDefinition Width="*"/>
                                   <ColumnDefinition Width="*"/>
                               </Grid.ColumnDefinitions>
                               
                               <!-- AI Judge Section -->
                               <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸŽ¯ AI Judge" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                        <TextBlock Text="Upload a photo of your dish and get AI-powered feedback on presentation, technique, and suggestions for improvement." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                        <Button Content="ðŸ“¸ Upload Photo &amp; Judge" 
                                           Background="#8B5CF6"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding JudgeDishCommand}"/>
                                    </StackPanel>
                                </Border>

                               <!-- AI Chef Section -->
                               <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸ‘¨â€ðŸ³ AI Chef" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                       <TextBlock Text="Let AI create custom recipes, analyze nutrition, and provide cooking guidance based on your preferences." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                       <Button Content="ðŸŽ² Generate Recipe" 
                                           Background="#4CAF50"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding GenerateRecipeCommand}"/>
                                    </StackPanel>
                                </Border>
                           </Grid>
                           
                           <!-- Additional AI Features -->
                           <Grid Margin="0,16,0,0">
                               <Grid.ColumnDefinitions>
                                   <ColumnDefinition Width="*"/>
                                   <ColumnDefinition Width="*"/>
                               </Grid.ColumnDefinitions>

                                <!-- Smart Shopping List -->
                               <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸ›’ Smart Shopping List" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                        <TextBlock Text="AI analyzes your recipes and creates an optimized shopping list with quantities and store layout suggestions." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                        <Button Content="ðŸ“‹ Generate Shopping List" 
                                           Background="#F59E0B"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding GenerateShoppingListCommand}"/>
                                    </StackPanel>
                                </Border>

                                <!-- Nutrition Analysis -->
                               <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸ“Š Nutrition Analysis" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                        <TextBlock Text="Get detailed nutritional information and health recommendations for your recipes using AI analysis." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,12"/>
                                       <Button Content="ðŸ” Analyze Nutrition" 
                                           Background="#EF4444"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding AnalyzeNutritionCommand}"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Analytics Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Analytics}">
                            <TextBlock Text="ðŸ“Š Analytics Dashboard" FontSize="24" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,20"/>
                            
                            <!-- Statistics Cards -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“ˆ" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding Recipes.Count}" FontSize="28" FontWeight="Bold" Foreground="#4CAF50" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Total Recipes" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="4,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#F59E0B" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="â±ï¸" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding MyAverageCookTime, StringFormat={}{0:F0} min}" FontSize="28" FontWeight="Bold" Foreground="#F59E0B" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Avg Cook Time" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <Border Grid.Column="2" Background="White" CornerRadius="12" Padding="20" Margin="4,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#EF4444" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ”¥" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding MyMostCommonDifficulty}" FontSize="28" FontWeight="Bold" Foreground="#EF4444" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Most Common" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <Border Grid.Column="3" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#8B5CF6" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ¤–" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding MyAIGeneratedRecipes}" FontSize="28" FontWeight="Bold" Foreground="#8B5CF6" HorizontalAlignment="Center"/>
                                        <TextBlock Text="AI Generated" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Charts Section -->
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Recipe Distribution Pie Chart -->
                                <Border Grid.Row="0" Grid.Column="0" CornerRadius="20" Padding="24" Margin="0,0,12,12">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#667eea" Offset="0"/>
                                            <GradientStop Color="#764ba2" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#667eea" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ¥§ Recipe Distribution" FontSize="20" FontWeight="Bold" Foreground="White" Margin="0,0,0,16" HorizontalAlignment="Center"/>
                                        <Grid Height="200" Margin="0,0,0,16">
                                            <Ellipse Width="160" Height="160" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Ellipse.Fill>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#FF6B6B" Offset="0"/>
                                                        <GradientStop Color="#FF8E8E" Offset="0.3"/>
                                                        <GradientStop Color="#4CAF50" Offset="0.6"/>
                                                        <GradientStop Color="#66BB6A" Offset="0.8"/>
                                                        <GradientStop Color="#9C27B0" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Ellipse.Fill>
                                            </Ellipse>
                                            <TextBlock Text="43" FontSize="48" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Grid>
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                <Border Width="16" Height="16" CornerRadius="8" Background="#FF6B6B" Margin="0,0,8,0"/>
                                                <TextBlock Text="Main Dishes (16)" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                <Border Width="16" Height="16" CornerRadius="8" Background="#4CAF50" Margin="0,0,8,0"/>
                                                <TextBlock Text="Desserts (12)" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                <Border Width="16" Height="16" CornerRadius="8" Background="#9C27B0" Margin="0,0,8,0"/>
                                                <TextBlock Text="Quick Meals (15)" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Cooking Time Trend Chart -->
                                <Border Grid.Row="0" Grid.Column="1" CornerRadius="20" Padding="24" Margin="12,0,0,12">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#f093fb" Offset="0"/>
                                            <GradientStop Color="#f5576c" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#f093fb" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“ˆ Cooking Time Trend" FontSize="20" FontWeight="Bold" Foreground="White" Margin="0,0,0,16" HorizontalAlignment="Center"/>
                                        <Grid Height="200" Margin="0,0,0,16">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0" VerticalAlignment="Bottom" Margin="4,0">
                                                <Border Height="60" CornerRadius="4,4,0,0" Background="#FF6B6B" Margin="0,0,0,8"/>
                                                <TextBlock Text="0-30" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Margin="4,0">
                                                <Border Height="100" CornerRadius="4,4,0,0" Background="#4CAF50" Margin="0,0,0,8"/>
                                                <TextBlock Text="30-60" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="2" VerticalAlignment="Bottom" Margin="4,0">
                                                <Border Height="140" CornerRadius="4,4,0,0" Background="#FF9800" Margin="0,0,0,8"/>
                                                <TextBlock Text="60-90" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="3" VerticalAlignment="Bottom" Margin="4,0">
                                                <Border Height="80" CornerRadius="4,4,0,0" Background="#9C27B0" Margin="0,0,0,8"/>
                                                <TextBlock Text="90-120" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="4" VerticalAlignment="Bottom" Margin="4,0">
                                                <Border Height="40" CornerRadius="4,4,0,0" Background="#607D8B" Margin="0,0,0,8"/>
                                                <TextBlock Text="120+" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </Grid>
                                        <TextBlock Text="Recipes by Cooking Time (minutes)" FontSize="14" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                    </StackPanel>
                                </Border>

                                <!-- Difficulty Level Chart -->
                                <Border Grid.Row="1" Grid.Column="0" CornerRadius="20" Padding="24" Margin="0,12,12,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#4CAF50" Offset="0"/>
                                            <GradientStop Color="#66BB6A" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸŽ¯ Difficulty Levels" FontSize="20" FontWeight="Bold" Foreground="White" Margin="0,0,0,16" HorizontalAlignment="Center"/>
                                        <StackPanel Margin="0,0,0,16">
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="60"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Easy" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                                <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#4CAF50" Margin="8,0" HorizontalAlignment="Left" Width="120"/>
                                                <TextBlock Grid.Column="2" Text="15" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </Grid>
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="60"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Medium" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                                <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#FF9800" Margin="8,0" HorizontalAlignment="Left" Width="180"/>
                                                <TextBlock Grid.Column="2" Text="23" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </Grid>
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="60"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Hard" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                                <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#F44336" Margin="8,0" HorizontalAlignment="Left" Width="60"/>
                                                <TextBlock Grid.Column="2" Text="5" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Monthly Recipe Creation Chart -->
                                <Border Grid.Row="1" Grid.Column="1" CornerRadius="20" Padding="24" Margin="12,12,0,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF6B6B" Offset="0"/>
                                            <GradientStop Color="#FF8E8E" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“… Monthly Activity" FontSize="20" FontWeight="Bold" Foreground="White" Margin="0,0,0,16" HorizontalAlignment="Center"/>
                                        <Grid Height="200" Margin="0,0,0,16">
                                            <Canvas>
                                                <Polyline Points="20,180 60,160 100,140 140,120 180,100 220,80 260,60" 
                                                         Stroke="White" StrokeThickness="3" StrokeLineJoin="Round"/>
                                                <Ellipse Canvas.Left="15" Canvas.Top="175" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="55" Canvas.Top="155" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="95" Canvas.Top="135" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="135" Canvas.Top="115" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="175" Canvas.Top="95" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="215" Canvas.Top="75" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="255" Canvas.Top="55" Width="10" Height="10" Fill="White"/>
                                                <TextBlock Canvas.Left="15" Canvas.Top="190" Text="Jan" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="55" Canvas.Top="190" Text="Feb" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="95" Canvas.Top="190" Text="Mar" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="135" Canvas.Top="190" Text="Apr" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="175" Canvas.Top="190" Text="May" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="215" Canvas.Top="190" Text="Jun" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="255" Canvas.Top="190" Text="Jul" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                            </Canvas>
                                        </Grid>
                                        <TextBlock Text="Recipes created per month" FontSize="14" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Settings Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Settings}">
                            <TextBlock Text="âš™ï¸ Settings" FontSize="24" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,20"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Application Settings -->
                                <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ”§ Application Settings" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,16"/>
                                        
                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="Theme" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <ComboBox SelectedValue="{Binding SelectedTheme}" Height="40" FontSize="14" SelectionChanged="ThemeComboBox_SelectionChanged">
                                                <ComboBoxItem Content="ðŸŒž Light Theme" Tag="Light"/>
                                                <ComboBoxItem Content="ðŸŒ™ Dark Theme" Tag="Dark"/>
                                            </ComboBox>
                                    </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="Language" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <ComboBox SelectedValue="{Binding SelectedLanguage}" Height="40" FontSize="14" SelectionChanged="LanguageComboBox_SelectionChanged">
                                                <ComboBoxItem Content="ðŸ‡ºðŸ‡¸ English" Tag="English"/>
                                                <ComboBoxItem Content="ðŸ‡»ðŸ‡³ Vietnamese" Tag="Vietnamese"/>
                                            </ComboBox>
                                    </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="Default Servings" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="{Binding DefaultServings}" Height="40" FontSize="14" Padding="12,8"/>
                                    </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,16">
                                            <CheckBox IsChecked="{Binding NotificationsEnabled}" Content="ðŸ”” Enable Notifications" 
                                                      FontSize="14" Foreground="#374151" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        
                                        <Button Content="ðŸ’¾ Save Settings" 
                                                Background="#4CAF50"
                                                Foreground="White"
                                                FontSize="14"
                                              FontWeight="SemiBold" 
                                                Padding="16,12"
                                                BorderThickness="0"
                                                HorizontalAlignment="Stretch"
                                                Command="{Binding SaveSettingsCommand}"/>
                                    </StackPanel>
                                </Border>

                                <!-- User Profile Settings -->
                                <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ‘¤ User Profile" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,16"/>

                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="Username" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="admin" Height="40" FontSize="14" Padding="12,8" IsReadOnly="True"/>
                                        </StackPanel>

                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="Email" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="admin@foodbook.com" Height="40" FontSize="14" Padding="12,8" IsReadOnly="True"/>
                                        </StackPanel>

                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="Role" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="Administrator" Height="40" FontSize="14" Padding="12,8" IsReadOnly="True"/>
                                        </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,16">
                                            <CheckBox IsChecked="{Binding AutoSaveEnabled}" Content="ðŸ’¾ Auto-save recipes" 
                                                      FontSize="14" Foreground="#374151" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        
                                        <Button Content="ðŸ”„ Refresh Profile" 
                                                Background="#8B5CF6"
                                           Foreground="White"
                                           FontSize="14"
                                                FontWeight="SemiBold"
                                                Padding="16,12"
                                           BorderThickness="0"
                                                HorizontalAlignment="Stretch"
                                                Command="{Binding RefreshProfileCommand}"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                            
                            <!-- Advanced Settings -->
                            <Border Background="White" CornerRadius="12" Padding="20" Margin="0,16,0,0">
                                <StackPanel>
                                    <TextBlock Text="âš¡ Advanced Settings" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,16"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Database Settings -->
                                        <Border Grid.Column="0" Background="#F8FAFC" CornerRadius="8" Padding="16" Margin="0,0,8,0">
                                <StackPanel>
                                                <TextBlock Text="ðŸ—„ï¸ Database" FontSize="16" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <TextBlock Text="Connection Status" FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                                                <TextBlock Text="âœ… Connected" FontSize="14" FontWeight="SemiBold" Foreground="#10B981" Margin="0,0,0,8"/>
                                                <Button Content="ðŸ”§ Test Connection" 
                                                        Background="#6B7280"
                                                        Foreground="White"
                                                        FontSize="12"
                                          FontWeight="SemiBold" 
                                                        Padding="12,8"
                                                        BorderThickness="0"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding TestDatabaseConnectionCommand}"/>
                                    </StackPanel>
                                        </Border>
                                        
                                        <!-- AI Settings -->
                                        <Border Grid.Column="1" Background="#F8FAFC" CornerRadius="8" Padding="16" Margin="4,0">
                                            <StackPanel>
                                                <TextBlock Text="ðŸ¤– AI Services" FontSize="16" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <TextBlock Text="AI Judge Status" FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                                                <TextBlock Text="âœ… Active" FontSize="14" FontWeight="SemiBold" Foreground="#10B981" Margin="0,0,0,8"/>
                                                <Button Content="âš™ï¸ Configure AI" 
                                                        Background="#8B5CF6"
                                                        Foreground="White"
                                                        FontSize="12"
                                                        FontWeight="SemiBold"
                                                        Padding="12,8"
                                                        BorderThickness="0"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding ConfigureAICommand}"/>
                                    </StackPanel>
                                        </Border>
                                        
                                        <!-- System Info -->
                                        <Border Grid.Column="2" Background="#F8FAFC" CornerRadius="8" Padding="16" Margin="8,0,0,0">
                                            <StackPanel>
                                                <TextBlock Text="ðŸ“Š System Info" FontSize="16" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <TextBlock Text="Version" FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                                                <TextBlock Text="v1.0.0" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <Button Content="ðŸ“‹ View Logs" 
                                                        Background="#F59E0B"
                                                        Foreground="White"
                                                        FontSize="12"
                                                        FontWeight="SemiBold"
                                                        Padding="12,8"
                                                        BorderThickness="0"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding ViewLogsCommand}"/>
                                    </StackPanel>
                                        </Border>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
            </Grid>
        </Grid>
    </Grid>
</Window>