<Window x:Class="Foodbook.Presentation.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Foodbook.Presentation.Views"
        xmlns:converters="clr-namespace:Foodbook.Presentation.Converters"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
        Title="ðŸ½ï¸ FoodBook - AI-Powered Recipe Manager" 
        Height="750" Width="1500"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource AppBackgroundBrush}"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResize">

    <Window.Resources>
        <!-- Converters -->
        <converters:TabVisibilityConverter x:Key="TabVisibilityConverter"/>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converters:CountToHeightConverter x:Key="CountToHeightConverter"/>
        <converters:CountToWidthConverter x:Key="CountToWidthConverter"/>
        <converters:MonthlyDataToPointsConverter x:Key="MonthlyDataToPointsConverter"/>
        <converters:ImageUrlConverter x:Key="ImageUrlConverter"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
        <converters:StringCleanConverter x:Key="StringCleanConverter"/>

        <!-- Modern Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource AccentBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- Card Style -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.4" BlurRadius="20"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="6,3"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- Active Sidebar Button Style -->
        <Style x:Key="ActiveSidebarButton" TargetType="Button" BasedOn="{StaticResource SidebarButton}">
            <Setter Property="Background" Value="#E0F2F1"/>
            <Setter Property="Foreground" Value="#00796B"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <!-- Recipe Card Style -->
        <Style x:Key="RecipeCard" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="2" Opacity="0.35" BlurRadius="12"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Pagination Button Style -->
        <Style x:Key="PaginationButton" TargetType="Button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource DividerBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#EEF2FF"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="#C7D2FE"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#E5E7EB"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="#9CA3AF"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Custom Title Bar -->
        <Border Grid.Row="0" Background="{DynamicResource SurfaceBrush}" Height="36" BorderBrush="{DynamicResource DividerBrush}" BorderThickness="0,0,0,1" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="12,0,0,0">
                    <Button Content="â˜°"
                           Command="{Binding ToggleSidebarCommand}"
                           Background="Transparent"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           BorderThickness="0"
                           Width="28" Height="28"
                           FontSize="13"
                           ToolTip="Toggle Sidebar"
                           Margin="4,0,10,0"/>
                    <TextBlock Text="ðŸ½ï¸" FontSize="18" Margin="0,0,6,0"/>
                    <TextBlock Text="FoodBook" FontSize="16" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                </StackPanel>

                <!-- Window Controls: Min, Max, Close -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,6,0">
                    <Button Content="ðŸ—•"
                           Background="Transparent"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           BorderThickness="0"
                           Width="28" Height="28"
                           FontSize="12"
                           Click="MinimizeButton_Click"
                           ToolTip="Minimize"/>
                    <Button Content="ðŸ—–"
                           Background="Transparent"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           BorderThickness="0"
                           Width="28" Height="28"
                           FontSize="12"
                           Click="MaximizeButton_Click"
                           ToolTip="Maximize"/>
                    <Button Content="âœ•"
                           Background="Transparent"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           BorderThickness="0"
                           Width="28" Height="28"
                           FontSize="12"
                           Click="CloseButton_Click"
                           ToolTip="Close"
                           MouseEnter="CloseButton_MouseEnter"
                           MouseLeave="CloseButton_MouseLeave"/>
                </StackPanel>

            </Grid>
        </Border>

        <!-- Main POS Layout -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Sidebar - POS Navigation -->
            <Border x:Name="SidebarBorder" Grid.Column="0" Background="{DynamicResource SidebarBackgroundBrush}" CornerRadius="0,0,16,0"
                    Width="{Binding IsSidebarCollapsed, Converter={StaticResource SidebarWidthConverter}}"
                    RenderTransformOrigin="1,0">
                <Border.RenderTransform>
                    <TranslateTransform x:Name="SidebarTransform"/>
                </Border.RenderTransform>
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsSidebarCollapsed}" Value="True">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                                           To="-220"
                                                           Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <PowerEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                                           To="0"
                                                           Duration="0:0:0.3">
                                                <DoubleAnimation.EasingFunction>
                                                    <PowerEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Sidebar top spacer (header now owns hamburger + logo) -->
                    <Border Grid.Row="0" Background="{DynamicResource SidebarBackgroundBrush}" Height="8"/>

                    <!-- Navigation Menu -->
                    <StackPanel Grid.Row="1" Margin="8,4,8,4">
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Dashboard"
                           Margin="0,0,0,2"
                           ToolTip="Dashboard">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ " FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Loc_Dashboard}" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Dashboard">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Recipes"
                           Margin="0,0,0,2"
                           ToolTip="My Recipes">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“š" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Loc_MyRecipes}" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Recipes">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Ingredients"
                           Margin="0,0,0,2"
                           ToolTip="Ingredients">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ¥˜" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Loc_Ingredients}" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Ingredients">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="AI"
                           Margin="0,0,0,2"
                           ToolTip="AI Chef">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ¤–" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="AI Chef" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="AI">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Analytics"
                           Margin="0,0,0,2"
                           ToolTip="Analytics">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“Š" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Loc_Analytics}" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Analytics">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SelectTabCommand}"
                           CommandParameter="Settings"
                           Margin="0,0,0,2"
                           ToolTip="Settings">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="âš™ï¸" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Loc_Settings}" FontSize="14" VerticalAlignment="Center"
                                               Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"/>
                                </StackPanel>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedTab}" Value="Settings">
                                            <Setter Property="Background" Value="#E8F5E8"/>
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>

                    <!-- User Profile -->
                    <Border Grid.Row="2" Background="#F8FAFC" CornerRadius="12" Margin="8,8,8,16" Padding="16"
                            Visibility="{Binding IsSidebarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}">
                        <StackPanel>
                            <TextBlock Text="ðŸ‘¤ User Profile" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,10"/>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8" VerticalAlignment="Center">
                                <!-- Avatar with initials -->
                                <Grid Width="34" Height="34" Margin="0,0,10,0">
                                    <Ellipse Fill="#34D399"/>
                                    <TextBlock Text="{Binding CurrentUser.Username, TargetNullValue=G}" 
                                               Foreground="White" FontWeight="Bold" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>
                                <StackPanel>
                                    <TextBlock Text="{Binding CurrentUser.Username, TargetNullValue=Guest}" FontSize="13" FontWeight="SemiBold" Foreground="#111827"/>
                                    <TextBlock Text="{Binding Greeting}" FontSize="12" Foreground="#374151"/>
                                    <TextBlock Text="{Binding CurrentUser.Email}" FontSize="10" Foreground="#6B7280"/>
                                </StackPanel>
                            </StackPanel>
                            <Border Background="#EEF2FF" CornerRadius="8" Padding="8" Margin="0,0,0,8">
                                <TextBlock Text="ðŸ³ Ready to cook something awesome today?" FontSize="11" Foreground="#4F46E5"/>
                            </Border>
                            <Button Content="ðŸšª Logout" 
                                    Background="Transparent"
                                    Foreground="#EF4444"
                                    FontSize="11"
                                    BorderThickness="0"
                                    Padding="6,4"
                                    HorizontalAlignment="Center"
                                    Click="Logout_Click"
                                    Cursor="Hand"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- Center Content Area - Recipe Display -->
            <Grid Grid.Column="1" Margin="20,16,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>


                <!-- Tab Content -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Disabled" Margin="0,16,0,16">
                    <StackPanel>
                        <!-- Dashboard Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Dashboard}">
                            <TextBlock Text="{Binding Loc_Dashboard}" FontSize="28" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,24"/>
                            
                            <!-- Modern KPI Cards - Purple Theme -->
                            <UniformGrid Columns="5" Margin="0,0,0,24" HorizontalAlignment="Stretch">
                                <!-- Total Recipes -->
                                <Border CornerRadius="12" Padding="20" Margin="4" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Width="48" Height="48" CornerRadius="24" Background="#F3E8FF" HorizontalAlignment="Center" Margin="0,0,0,12">
                                            <TextBlock Text="ðŸ½ï¸" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="{Binding MyTotalRecipes}" FontSize="32" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Total Recipes" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Pantry Ingredients -->
                                <Border CornerRadius="12" Padding="20" Margin="4" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Width="48" Height="48" CornerRadius="24" Background="#F3E8FF" HorizontalAlignment="Center" Margin="0,0,0,12">
                                            <TextBlock Text="ðŸ§º" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="{Binding TotalIngredients}" FontSize="32" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Pantry Ingredients" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Expiring Soon -->
                                <Border CornerRadius="12" Padding="20" Margin="4" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Width="48" Height="48" CornerRadius="24" Background="#F3E8FF" HorizontalAlignment="Center" Margin="0,0,0,12">
                                            <TextBlock Text="â³" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="{Binding ExpiringSoonCount}" FontSize="32" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Expiring Soon (â‰¤3 days)" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Expired Items -->
                                <Border CornerRadius="12" Padding="20" Margin="4" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Width="48" Height="48" CornerRadius="24" Background="#F3E8FF" HorizontalAlignment="Center" Margin="0,0,0,12">
                                            <TextBlock Text="âš ï¸" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="{Binding ExpiredCount}" FontSize="32" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Expired Items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>
                                
                                <!-- AI Operations -->
                                <Border CornerRadius="12" Padding="20" Margin="4" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Width="48" Height="48" CornerRadius="24" Background="#F3E8FF" HorizontalAlignment="Center" Margin="0,0,0,12">
                                            <TextBlock Text="ðŸ¤–" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="{Binding AIOperationsCount}" FontSize="32" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center"/>
                                        <TextBlock Text="AI Operations" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>
                            </UniformGrid>

                            <!-- Charts Row -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Pantry Summary -->
                                <Border Grid.Column="0" CornerRadius="16" Padding="24" Margin="0,0,12,0" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Grid Margin="0,0,0,20">
                                            <TextBlock Text="Pantry Summary" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            <ComboBox HorizontalAlignment="Right" Width="80" Height="32" FontSize="12" Background="#F8FAFC" BorderThickness="0">
                                                <ComboBoxItem Content="Today" IsSelected="True"/>
                                                <ComboBoxItem Content="Week"/>
                                                <ComboBoxItem Content="Month"/>
                                            </ComboBox>
                                        </Grid>
                                        
                                        <!-- Donut Charts -->
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <!-- In Stock (proxy) -->
                                            <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                                <Border Width="80" Height="80" CornerRadius="40" Background="#F3E8FF" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding PantryCoveragePercent, StringFormat={}{0}%}" FontSize="16" FontWeight="Bold" Foreground="#8B5CF6" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <TextBlock Text="In Stock" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            
                                            <!-- Expiring Soon -->
                                            <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                                <Border Width="80" Height="80" CornerRadius="40" Background="#F3E8FF" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding ExpiringSoonCount}" FontSize="16" FontWeight="Bold" Foreground="#8B5CF6" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <TextBlock Text="Expiring Soon" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            
                                            <!-- Expired -->
                                            <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                                <Border Width="80" Height="80" CornerRadius="40" Background="#F3F4F6" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding ExpiredCount}" FontSize="16" FontWeight="Bold" Foreground="#9CA3AF" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <TextBlock Text="Expired" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Overview -->
                                <Border Grid.Column="1" CornerRadius="16" Padding="24" Margin="6,0" Background="White" Visibility="Collapsed">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Grid Margin="0,0,0,20">
                                            <TextBlock Text="Overview" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            <TextBlock Text="View All" FontSize="12" Foreground="#8B5CF6" HorizontalAlignment="Right" VerticalAlignment="Center" Cursor="Hand"/>
                                        </Grid>
                                        
                                        <!-- Main Donut Chart -->
                                        <Grid HorizontalAlignment="Center">
                                            <Border Width="120" Height="120" CornerRadius="60" Background="#F3E8FF" Margin="0,0,0,16">
                                                <TextBlock Text="52%" FontSize="24" FontWeight="Bold" Foreground="#8B5CF6" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </Grid>
                                        
                                        <!-- Legend -->
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                <Border Width="12" Height="12" CornerRadius="6" Background="#8B5CF6" Margin="0,0,8,0"/>
                                                <TextBlock Text="Morning" FontSize="12" Foreground="#6B7280"/>
                                                <TextBlock Text="38%" FontSize="12" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Right" Margin="8,0,0,0"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                <Border Width="12" Height="12" CornerRadius="6" Background="#A78BFA" Margin="0,0,8,0"/>
                                                <TextBlock Text="Afternoon" FontSize="12" Foreground="#6B7280"/>
                                                <TextBlock Text="28%" FontSize="12" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Right" Margin="8,0,0,0"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="12" Height="12" CornerRadius="6" Background="#C4B5FD" Margin="0,0,8,0"/>
                                                <TextBlock Text="Evening" FontSize="12" Foreground="#6B7280"/>
                                                <TextBlock Text="32%" FontSize="12" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Right" Margin="8,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Top Ingredients (sample) -->
                                <Border Grid.Column="2" CornerRadius="16" Padding="24" Margin="12,0,0,0" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Grid Margin="0,0,0,20">
                                            <TextBlock Text="Top Ingredients" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            <TextBlock Text="View All" FontSize="12" Foreground="#8B5CF6" HorizontalAlignment="Right" VerticalAlignment="Center" Cursor="Hand"/>
                                        </Grid>
                                        
                                        <!-- Items List (bound to TopIngredients) -->
                                        <ItemsControl ItemsSource="{Binding TopIngredients}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                                        <Border Width="40" Height="40" CornerRadius="20" Background="#F3E8FF" Margin="0,0,12,0">
                                                            <TextBlock Text="ðŸ¥—" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding Key}" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                            <TextBlock Text="{Binding Value}" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Bottom Charts Row (hidden as not relevant) -->
                            <Grid Visibility="Collapsed">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Customer Map -->
                                <Border Grid.Column="0" CornerRadius="16" Padding="24" Margin="0,0,12,0" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Grid Margin="0,0,0,20">
                                            <TextBlock Text="Customer Map" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            <ComboBox HorizontalAlignment="Right" Width="80" Height="32" FontSize="12" Background="#F8FAFC" BorderThickness="0">
                                                <ComboBoxItem Content="Weekly" IsSelected="True"/>
                                                <ComboBoxItem Content="Monthly"/>
                                                <ComboBoxItem Content="Yearly"/>
                                            </ComboBox>
                                        </Grid>
                                        
                                        <!-- Bar Chart -->
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            
                                            <!-- Chart Area -->
                                            <Grid Grid.Row="0" Margin="0,0,0,16">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <!-- Monday -->
                                                <StackPanel Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                                    <Border Width="20" Height="120" Background="#8B5CF6" CornerRadius="4" Margin="0,0,0,4"/>
                                                    <Border Width="20" Height="100" Background="#C4B5FD" CornerRadius="4"/>
                                                </StackPanel>
                                                
                                                <!-- Tuesday -->
                                                <StackPanel Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                                    <Border Width="20" Height="140" Background="#8B5CF6" CornerRadius="4" Margin="0,0,0,4"/>
                                                    <Border Width="20" Height="120" Background="#C4B5FD" CornerRadius="4"/>
                                                </StackPanel>
                                                
                                                <!-- Wednesday -->
                                                <StackPanel Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                                    <Border Width="20" Height="160" Background="#8B5CF6" CornerRadius="4" Margin="0,0,0,4"/>
                                                    <Border Width="20" Height="140" Background="#C4B5FD" CornerRadius="4"/>
                                                </StackPanel>
                                                
                                                <!-- Thursday -->
                                                <StackPanel Grid.Column="3" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                                    <Border Width="20" Height="180" Background="#8B5CF6" CornerRadius="4" Margin="0,0,0,4"/>
                                                    <Border Width="20" Height="160" Background="#C4B5FD" CornerRadius="4"/>
                                                </StackPanel>
                                                
                                                <!-- Friday -->
                                                <StackPanel Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                                    <Border Width="20" Height="200" Background="#8B5CF6" CornerRadius="4" Margin="0,0,0,4"/>
                                                    <Border Width="20" Height="180" Background="#C4B5FD" CornerRadius="4"/>
                                                </StackPanel>
                                                
                                                <!-- Saturday -->
                                                <StackPanel Grid.Column="5" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                                    <Border Width="20" Height="220" Background="#8B5CF6" CornerRadius="4" Margin="0,0,0,4"/>
                                                    <Border Width="20" Height="200" Background="#C4B5FD" CornerRadius="4"/>
                                                </StackPanel>
                                                
                                                <!-- Sunday -->
                                                <StackPanel Grid.Column="6" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                                    <Border Width="20" Height="180" Background="#8B5CF6" CornerRadius="4" Margin="0,0,0,4"/>
                                                    <Border Width="20" Height="160" Background="#C4B5FD" CornerRadius="4"/>
                                                </StackPanel>
                                            </Grid>
                                            
                                            <!-- X-axis Labels -->
                                            <Grid Grid.Row="1">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Mon" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="1" Text="Tue" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="2" Text="Wed" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="3" Text="Thu" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="4" Text="Fri" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="5" Text="Sat" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="6" Text="Sun" FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                            </Grid>
                                        </Grid>
                                        
                                        <!-- Legend -->
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,16,0,0">
                                            <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                                                <Border Width="12" Height="12" CornerRadius="2" Background="#8B5CF6" Margin="0,0,8,0"/>
                                                <TextBlock Text="This week" FontSize="12" Foreground="#6B7280"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="12" Height="12" CornerRadius="2" Background="#C4B5FD" Margin="0,0,8,0"/>
                                                <TextBlock Text="Last week" FontSize="12" Foreground="#6B7280"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Total Revenue -->
                                <Border Grid.Column="1" CornerRadius="16" Padding="24" Margin="12,0,0,0" Background="White">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="12"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="Total Revenue" FontSize="18" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,20"/>
                                        
                                        <!-- Area Chart -->
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            
                                            <!-- Chart Area -->
                                            <Border Grid.Row="0" Background="#F3E8FF" CornerRadius="8" Margin="0,0,0,16" Height="200">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <!-- Revenue Area (simplified representation) -->
                                                    <Border Grid.Column="0" Background="#8B5CF6" CornerRadius="2" Height="40" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="1" Background="#8B5CF6" CornerRadius="2" Height="60" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="2" Background="#8B5CF6" CornerRadius="2" Height="80" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="3" Background="#8B5CF6" CornerRadius="2" Height="100" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="4" Background="#8B5CF6" CornerRadius="2" Height="120" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="5" Background="#8B5CF6" CornerRadius="2" Height="140" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="6" Background="#8B5CF6" CornerRadius="2" Height="160" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="7" Background="#8B5CF6" CornerRadius="2" Height="180" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="8" Background="#8B5CF6" CornerRadius="2" Height="160" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="9" Background="#8B5CF6" CornerRadius="2" Height="140" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="10" Background="#8B5CF6" CornerRadius="2" Height="120" VerticalAlignment="Bottom" Margin="1"/>
                                                    <Border Grid.Column="11" Background="#8B5CF6" CornerRadius="2" Height="100" VerticalAlignment="Bottom" Margin="1"/>
                                                    
                                                    <!-- Current Month Indicator -->
                                                    <Border Grid.Column="11" Width="2" Height="200" Background="#8B5CF6" VerticalAlignment="Top" Margin="0,0,0,0">
                                                        <Border.Effect>
                                                            <DropShadowEffect Color="#8B5CF6" Direction="270" ShadowDepth="0" Opacity="0.5" BlurRadius="4"/>
                                                        </Border.Effect>
                                                    </Border>
                                                </Grid>
                                            </Border>
                                            
                                            <!-- X-axis Labels -->
                                            <Grid Grid.Row="1">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Jan" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="1" Text="Feb" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="2" Text="Mar" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="3" Text="Apr" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="4" Text="May" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="5" Text="Jun" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="6" Text="Jul" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="7" Text="Aug" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="8" Text="Sep" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="9" Text="Oct" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="10" Text="Nov" FontSize="10" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                                <TextBlock Grid.Column="11" Text="Dec" FontSize="10" Foreground="#8B5CF6" HorizontalAlignment="Center" FontWeight="Bold"/>
                                            </Grid>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Recipes Content - Modern Redesign -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Recipes}">
                            <!-- Modern Header with Gradient Background -->
                            <Border Background="White" CornerRadius="20" Padding="32" Margin="0,0,0,24">
                                <Border.Effect>
                                    <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="8" Opacity="0.15" BlurRadius="20"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Enhanced Title Section -->
                                    <StackPanel Grid.Column="0">
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                            <Border Background="#4CAF50" CornerRadius="12" Padding="8" Margin="0,0,16,0" Height="48">
                                                <TextBlock Text="ðŸ½ï¸" FontSize="24" Foreground="White"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="My Recipe Collection" FontSize="36" FontWeight="Bold" Foreground="#1F2937"/>
                                                <TextBlock Text="Discover, create, and manage your culinary masterpieces" FontSize="16" Foreground="#6B7280" Margin="0,4,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Enhanced Stats Row -->
                                        <Grid Margin="0,8,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <Border Grid.Column="0" Background="#E8F5E8" CornerRadius="8" Padding="12,8" Margin="0,0,12,0">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ“š" FontSize="14" Margin="0,0,6,0"/>
                                                    <TextBlock Text="{Binding Recipes.Count, StringFormat={}{0}}" FontSize="16" FontWeight="Bold" Foreground="#4CAF50"/>
                                                    <TextBlock Text=" recipes" FontSize="14" Foreground="#6B7280" Margin="4,0,0,0"/>
                                                </StackPanel>
                                            </Border>
                                            
                                            <Border Grid.Column="1" Background="#FFF3E0" CornerRadius="8" Padding="12,8" Margin="0,0,12,0">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="â­" FontSize="14" Margin="0,0,6,0"/>
                                                    <TextBlock Text="{Binding MyAverageCookTime, StringFormat={}{0:F0}}" FontSize="16" FontWeight="Bold" Foreground="#FF9800"/>
                                                    <TextBlock Text=" avg min" FontSize="14" Foreground="#6B7280" Margin="4,0,0,0"/>
                                                </StackPanel>
                                            </Border>
                                            
                                            <Border Grid.Column="2" Background="#E3F2FD" CornerRadius="8" Padding="12,8" Margin="0,0,12,0">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ”¥" FontSize="14" Margin="0,0,6,0"/>
                                                    <TextBlock Text="{Binding MyMostCommonDifficulty}" FontSize="16" FontWeight="Bold" Foreground="#2196F3"/>
                                                </StackPanel>
                                            </Border>
                                            
                                            <Border Grid.Column="3" Background="#F3E5F5" CornerRadius="8" Padding="12,8">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¤–" FontSize="14" Margin="0,0,6,0"/>
                                                    <TextBlock Text="{Binding MyAIGeneratedRecipes}" FontSize="16" FontWeight="Bold" Foreground="#9C27B0"/>
                                                    <TextBlock Text=" AI recipes" FontSize="14" Foreground="#6B7280" Margin="4,0,0,0"/>
                                                </StackPanel>
                                            </Border>
                                        </Grid>
                                    </StackPanel>
                                    
                                    <!-- Modern Action Buttons -->
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                                        <Button Background="#4CAF50" Foreground="White" FontSize="14" FontWeight="SemiBold" 
                                                Padding="24,16" BorderThickness="0" Margin="0,0,12,0"
                                                Command="{Binding AnalyzePantryCommand}">
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¤–" FontSize="16" Margin="0,0,8,0"/>
                                                    <TextBlock Text="Analyze Pantry (AI Chef)"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                        <Button Background="#4CAF50" Foreground="White" FontSize="14" FontWeight="SemiBold" 
                                                Padding="24,16" BorderThickness="0" Margin="0,0,12,0"
                                                Command="{Binding AddRecipeCommand}">
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="âž•" FontSize="16" Margin="0,0,8,0"/>
                                                    <TextBlock Text="Add Recipe"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                        
                                        <Button Background="#8B5CF6" Foreground="White" FontSize="14" FontWeight="SemiBold" 
                                                Padding="24,16" BorderThickness="0"
                                                Command="{Binding ViewRecipeAnalyticsCommand}">
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ“Š" FontSize="16" Margin="0,0,8,0"/>
                                                    <TextBlock Text="Analytics"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Modern Search and Filter Section -->
                            <Border Background="White" CornerRadius="20" Padding="32" Margin="0,0,0,24">
                                <Border.Effect>
                                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.08" BlurRadius="16"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Enhanced Search Bar -->
                                    <Border Grid.Row="0" Background="#F8FAFC" CornerRadius="16" Padding="20,16" Margin="0,0,0,20">
                                        <Grid>
                                            <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                                    Background="Transparent"
                                                    BorderThickness="0"
                                                    FontSize="16"
                                                    VerticalAlignment="Center"
                                                    Padding="0,0,50,0"/>
                                            <TextBlock Text="ðŸ” Search recipes, ingredients, or cooking methods..." 
                                                      Foreground="#9CA3AF" 
                                                      FontSize="16"
                                                      VerticalAlignment="Center"
                                                      IsHitTestVisible="False"
                                                      Margin="0,0,50,0">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SearchText}" Value="">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding SearchText}" Value="{x:Null}">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                            <Button Background="#4CAF50" Foreground="White" Width="36" Height="34" 
                                                   FontSize="16" BorderThickness="0" HorizontalAlignment="Right" 
                                                   Command="{Binding SearchRecipesCommand}">
                                                <TextBlock Text="ðŸ”"/>
                                            </Button>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Modern Filter Tabs -->
                                    <Grid Grid.Row="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Category Filter Pills -->
                                        <ScrollViewer Grid.Column="0" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Disabled">
                                            <StackPanel Orientation="Horizontal">
                                                <!-- All Recipes Pill -->
                                                <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                        Background="#4CAF50" Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding Gesture="LeftClick" Command="{Binding FilterByCategoryCommand}" CommandParameter="All"/>
                                                    </Border.InputBindings>
                                                    <TextBlock Text="{Binding Recipes.Count, StringFormat={}All ({0})}" 
                                                              Foreground="White" FontWeight="SemiBold" FontSize="14"/>
                                                </Border>
                                                
                                                <!-- Main Dishes Pill -->
                                                <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                        Background="#F1F5F9" Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding Gesture="LeftClick" Command="{Binding FilterByCategoryCommand}" CommandParameter="Main Dishes"/>
                                                    </Border.InputBindings>
                                                    <TextBlock Text="ðŸ½ï¸ Main Dishes" 
                                                              Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                                </Border>
                                                
                                                <!-- Desserts Pill -->
                                                <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                        Background="#F1F5F9" Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding Gesture="LeftClick" Command="{Binding FilterByCategoryCommand}" CommandParameter="Desserts"/>
                                                    </Border.InputBindings>
                                                    <TextBlock Text="ðŸ° Desserts" 
                                                              Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                                </Border>
                                                
                                                <!-- Quick Recipes Pill -->
                                                <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                        Background="#F1F5F9" Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding Gesture="LeftClick" Command="{Binding FilterByCategoryCommand}" CommandParameter="Quick"/>
                                                    </Border.InputBindings>
                                                    <TextBlock Text="âš¡ Quick Recipes" 
                                                              Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                                </Border>
                                                
                                                <!-- Healthy Recipes Pill -->
                                                <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                        Background="#F1F5F9" Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding Gesture="LeftClick" Command="{Binding FilterByCategoryCommand}" CommandParameter="Healthy"/>
                                                    </Border.InputBindings>
                                                    <TextBlock Text="ðŸ¥— Healthy" 
                                                              Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                                </Border>
                                            </StackPanel>
                                        </ScrollViewer>
                                        
                                        <!-- Modern Sort Dropdown -->
                                        <Border Grid.Column="1" Background="#F8FAFC" CornerRadius="12" Padding="16,12">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="Sort by:" FontSize="14" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                                <ComboBox SelectedItem="{Binding SortBy}" Width="160" Height="34" FontSize="14" 
                                                         Background="White" BorderThickness="0">
                                                    <ComboBoxItem Content="ðŸ“ Name A-Z" IsSelected="True"/>
                                                    <ComboBoxItem Content="ðŸ“ Name Z-A"/>
                                                    <ComboBoxItem Content="â±ï¸ Time (Low to High)"/>
                                                    <ComboBoxItem Content="â±ï¸ Time (High to Low)"/>
                                                    <ComboBoxItem Content="ðŸ”¥ Difficulty (Easy to Hard)"/>
                                                    <ComboBoxItem Content="ðŸ”¥ Difficulty (Hard to Easy)"/>
                                                    <ComboBoxItem Content="ðŸ“… Date Created"/>
                                                </ComboBox>
                                            </StackPanel>
                                        </Border>
                                    </Grid>
                                </Grid>
                            </Border>

                            <!-- Modern Recipe Grid -->
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <ItemsControl Grid.Row="0" ItemsSource="{Binding PagedRecipes}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel Margin="0,0,0,24" ItemWidth="360" ItemHeight="Auto"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="White" CornerRadius="16" Padding="12" Margin="8" Cursor="Hand" MinWidth="340" MaxWidth="360">
                                                <Border.Effect>
                                                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.08" BlurRadius="14"/>
                                                </Border.Effect>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="120"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>

                                                    <!-- Thumbnail -->
                                                    <Border Grid.Column="0" CornerRadius="12" Background="#F8FAFC" Width="120" Height="120">
                                                        <Grid>
                                                            <Image Source="{Binding ImageUrl, Converter={StaticResource ImageUrlConverter}}" Stretch="UniformToFill"/>
                                                            <TextBlock Text="ðŸ½ï¸" FontSize="32" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                                                       Foreground="#9CA3AF" 
                                                                       Visibility="{Binding ImageUrl, Converter={StaticResource NullToVisibilityConverter}}"/>
                                                        </Grid>
                                                    </Border>

                                                    <!-- Info -->
                                                    <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Text="{Binding Title}" FontSize="16" FontWeight="SemiBold" Foreground="#111827" TextWrapping="Wrap"/>
                                                            <Border Background="#4CAF50" CornerRadius="10" Padding="6,2" Margin="8,0,0,0" Visibility="{Binding Category, Converter={StaticResource NullToVisibilityConverter}, ConverterParameter=Invert}">
                                                                <TextBlock Text="{Binding Category}" FontSize="11" Foreground="White"/>
                                                            </Border>
                                                            <Border Background="#FF9800" CornerRadius="10" Padding="6,2" Margin="6,0,0,0">
                                                                <TextBlock Text="{Binding Difficulty, Converter={StaticResource StringCleanConverter}}" FontSize="11" Foreground="White"/>
                                                            </Border>
                                                        </StackPanel>

                                                        <TextBlock Text="{Binding Description}" FontSize="12" Foreground="#6B7280" TextWrapping="Wrap" MaxHeight="36" Margin="0,4,0,6"/>

                                                        <StackPanel Orientation="Horizontal">
                                                            <StackPanel Orientation="Horizontal" Margin="0,0,8,0">
                                                                <TextBlock Text="â±ï¸" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding CookTime, StringFormat={}{0}m}" Foreground="#374151"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal" Margin="8,0,0,0">
                                                                <TextBlock Text="â­" Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding Ratings, Converter={StaticResource CountToWidthConverter}}" Visibility="Collapsed"/>
                                                                <TextBlock Text="{Binding Ratings.Count, StringFormat={}{0} reviews}" Foreground="#374151"/>
                                                            </StackPanel>
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                                            <Button Background="#4CAF50" Foreground="White" FontSize="12" Padding="10,6" BorderThickness="0" 
                                                                    Command="{Binding DataContext.ViewRecipeCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Margin="0,0,6,0">
                                                                <TextBlock Text="View"/>
                                                            </Button>
                                                            <Button Background="#6B7280" Foreground="White" FontSize="12" Padding="10,6" BorderThickness="0" 
                                                                    Command="{Binding DataContext.EditRecipeCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}">
                                                                <TextBlock Text="Edit"/>
                                                            </Button>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <!-- Pagination Controls -->
                                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,0">
                                    <Button Style="{StaticResource PaginationButton}" Content="â—„" Command="{Binding DataContext.PrevPageCommand, RelativeSource={RelativeSource AncestorType=Window}}" Margin="4,0"/>
                                    <Border Background="White" CornerRadius="8" Padding="8,4" Margin="8,0" BorderBrush="{DynamicResource DividerBrush}" BorderThickness="1">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="Page" Foreground="#6B7280" Margin="0,0,6,0"/>
                                            <ComboBox Width="72" Height="28" ItemsSource="{Binding PageOptions}"
                                                      SelectedItem="{Binding SelectedPage, Mode=TwoWay}"
                                                      BorderThickness="0" Background="Transparent"/>
                                            <TextBlock Text="/" Foreground="#6B7280" Margin="6,0"/>
                                            <TextBlock Text="{Binding TotalPages}"/>
                                        </StackPanel>
                                    </Border>
                                    <Button Style="{StaticResource PaginationButton}" Content="â–º" Command="{Binding DataContext.NextPageCommand, RelativeSource={RelativeSource AncestorType=Window}}" Margin="4,0"/>
                                </StackPanel>
                            </Grid>

                            <!-- Modern Empty State -->
                            <Border Background="White" CornerRadius="20" Padding="60" Margin="0,40,0,0" 
                                    Visibility="{Binding Recipes.Count, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Border.Effect>
                                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.08" BlurRadius="16"/>
                                </Border.Effect>
                                <StackPanel HorizontalAlignment="Center">
                                    <Border Background="#F8FAFC" CornerRadius="50" Padding="30" Margin="0,0,0,24">
                                        <TextBlock Text="ðŸ½ï¸" FontSize="72" HorizontalAlignment="Center"/>
                                    </Border>
                                    <TextBlock Text="No recipes yet" FontSize="28" FontWeight="Bold" Foreground="#1F2937" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    <TextBlock Text="Start building your culinary collection! Add your first recipe to get started." 
                                               FontSize="16" Foreground="#6B7280" HorizontalAlignment="Center" 
                                               TextWrapping="Wrap" TextAlignment="Center" Margin="0,0,0,32"/>
                                    <Button Background="#4CAF50" Foreground="White" FontSize="16" FontWeight="SemiBold" 
                                            Padding="32,16" BorderThickness="0"
                                            Command="{Binding AddRecipeCommand}">
                                        <Button.Content>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="âž•" FontSize="18" Margin="0,0,8,0"/>
                                                <TextBlock Text="Add Your First Recipe"/>
                                            </StackPanel>
                                        </Button.Content>
                                    </Button>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Ingredients Content - Modern Redesign -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Ingredients}">
                            <!-- Modern Header with Enhanced Design -->
                            <Border Background="White" CornerRadius="20" Padding="32" Margin="0,0,0,24">
                                <Border.Effect>
                                    <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="8" Opacity="0.15" BlurRadius="20"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Enhanced Title Section -->
                                    <StackPanel Grid.Column="0">
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                            <Border Background="#FF6B6B" CornerRadius="12" Padding="8" Margin="0,0,16,0" Height="57">
                                                <TextBlock Text="ðŸ¥˜" FontSize="24" Foreground="White"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Smart Inventory &amp; Meal Planner Hub" FontSize="36" FontWeight="Bold" Foreground="#1F2937"/>
                                                <TextBlock Text="Reduce waste, optimize shopping, and discover cook-now recipes (AI)" FontSize="16" Foreground="#6B7280" Margin="0,4,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Smart Overview Metrics -->
                                        <Grid Margin="0,8,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" Background="#FFEBEE" CornerRadius="12" Padding="16" Margin="0,0,12,0">
                                                <StackPanel>
                                                    <TextBlock Text="Near Expiration" FontWeight="Bold"/>
                                                    <TextBlock Text="{Binding NearExpiryCount}" FontSize="22" FontWeight="Bold" Foreground="#EF4444"/>
                                                    <TextBlock Text="Within 7 days" Foreground="#6B7280"/>
                                                </StackPanel>
                                            </Border>
                                            <Border Grid.Column="1" Background="#ECFDF5" CornerRadius="12" Padding="16" Margin="6,0,6,0">
                                                <StackPanel>
                                                    <TextBlock Text="Shopping Alerts" FontWeight="Bold"/>
                                                    <TextBlock Text="{Binding ShoppingAlertsCount}" FontSize="22" FontWeight="Bold" Foreground="#10B981"/>
                                                    <TextBlock Text="At/Below Min Qty" Foreground="#6B7280"/>
                                                </StackPanel>
                                            </Border>
                                            <Border Grid.Column="2" Background="#EFF6FF" CornerRadius="12" Padding="16" Margin="12,0,0,0">
                                                <StackPanel>
                                                    <TextBlock Text="Total Items" FontWeight="Bold"/>
                                                    <TextBlock Text="{Binding TotalIngredients}" FontSize="22" FontWeight="Bold" Foreground="#3B82F6"/>
                                                    <TextBlock Text="In Stock" Foreground="#6B7280"/>
                                                </StackPanel>
                                            </Border>
                                        </Grid>
                                    </StackPanel>
                                    
                                    <!-- Modern Action Buttons -->
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                                        <Button Background="#FF6B6B" Foreground="White" FontSize="14" FontWeight="SemiBold" 
                                                Padding="24,16" BorderThickness="0" Margin="0,0,12,0"
                                                Command="{Binding AddIngredientCommand}">
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="âž•" FontSize="16" Margin="0,0,8,0"/>
                                                    <TextBlock Text="Add Ingredient"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                        
                                        <Button Background="#8B5CF6" Foreground="White" FontSize="14" FontWeight="SemiBold" 
                                                Padding="24,16" BorderThickness="0"
                                                Command="{Binding ViewIngredientAnalyticsCommand}">
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ“Š" FontSize="16" Margin="0,0,8,0"/>
                                                    <TextBlock Text="Analytics"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- Modern Ingredient Filter Section -->
                            <Border Background="White" CornerRadius="20" Padding="32" Margin="0,0,0,24">
                                <Border.Effect>
                                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="4" Opacity="0.08" BlurRadius="16"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Category Filter Pills -->
                                    <ScrollViewer Grid.Column="0" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Disabled">
                                        <StackPanel Orientation="Horizontal">
                                            <!-- All Ingredients Pill -->
                                            <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                    Background="#FF6B6B" Cursor="Hand">
                                                <Border.InputBindings>
                                                    <MouseBinding Gesture="LeftClick" Command="{Binding NavigateToAllIngredientsCommand}"/>
                                                </Border.InputBindings>
                                                <TextBlock Text="{Binding Ingredients.Count, StringFormat={}All ({0})}" 
                                                          Foreground="White" FontWeight="SemiBold" FontSize="14"/>
                                            </Border>
                                            
                                            <!-- Proteins Pill -->
                                            <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                    Background="#F1F5F9" Cursor="Hand">
                                                <Border.InputBindings>
                                                    <MouseBinding Gesture="LeftClick" Command="{Binding NavigateToProteinsCommand}"/>
                                                </Border.InputBindings>
                                                <TextBlock Text="ðŸ¥© Proteins" 
                                                          Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                            </Border>
                                            
                                            <!-- Grains Pill -->
                                            <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                    Background="#F1F5F9" Cursor="Hand">
                                                <Border.InputBindings>
                                                    <MouseBinding Gesture="LeftClick" Command="{Binding NavigateToGrainsCommand}"/>
                                                </Border.InputBindings>
                                                <TextBlock Text="ðŸŒ¾ Grains" 
                                                          Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                            </Border>
                                            
                                            <!-- Vegetables Pill -->
                                            <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                    Background="#F1F5F9" Cursor="Hand">
                                                <Border.InputBindings>
                                                    <MouseBinding Gesture="LeftClick" Command="{Binding NavigateToVegetablesCommand}"/>
                                                </Border.InputBindings>
                                                <TextBlock Text="ðŸ¥• Vegetables" 
                                                          Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                            </Border>
                                            
                                            <!-- Spices Pill -->
                                            <Border Padding="16,10" Margin="0,0,8,0" CornerRadius="20" 
                                                    Background="#F1F5F9" Cursor="Hand">
                                                <Border.InputBindings>
                                                    <MouseBinding Gesture="LeftClick" Command="{Binding NavigateToSpicesCommand}"/>
                                                </Border.InputBindings>
                                                <TextBlock Text="ðŸ§‚ Spices" 
                                                          Foreground="#374151" FontWeight="Medium" FontSize="14"/>
                                            </Border>
                                        </StackPanel>
                                    </ScrollViewer>
                                    
                                    <!-- Modern Sort Dropdown -->
                                    <Border Grid.Column="1" Background="#F8FAFC" CornerRadius="12" Padding="16,12">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Sort by:" FontSize="14" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                            <ComboBox SelectedItem="{Binding IngredientSortBy}" Width="160" Height="34" FontSize="14" 
                                                     Background="White" BorderThickness="0">
                                                <ComboBoxItem Content="ðŸ“ Name A-Z" IsSelected="True"/>
                                                <ComboBoxItem Content="ðŸ“ Name Z-A"/>
                                                <ComboBoxItem Content="ðŸ“‚ Category"/>
                                                <ComboBoxItem Content="ðŸ“… Date Added"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </Border>
                            
                            <!-- Modern Ingredient Categories Overview -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Proteins -->
                                <Border Grid.Column="0" Background="White" CornerRadius="16" Padding="20" Margin="0,0,6,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="6" Opacity="0.12" BlurRadius="16"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Background="#FFEBEE" CornerRadius="12" Padding="12" Margin="0,0,0,12">
                                            <TextBlock Text="ðŸ¥©" FontSize="28" HorizontalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Proteins" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="10 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <!-- Grains -->
                                <Border Grid.Column="1" Background="White" CornerRadius="16" Padding="20" Margin="3,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FFB74D" Direction="270" ShadowDepth="6" Opacity="0.12" BlurRadius="16"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Background="#FFF3E0" CornerRadius="12" Padding="12" Margin="0,0,0,12">
                                            <TextBlock Text="ðŸŒ¾" FontSize="28" HorizontalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Grains" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="8 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <!-- Vegetables -->
                                <Border Grid.Column="2" Background="White" CornerRadius="16" Padding="20" Margin="3,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="6" Opacity="0.12" BlurRadius="16"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Background="#E8F5E8" CornerRadius="12" Padding="12" Margin="0,0,0,12">
                                            <TextBlock Text="ðŸ¥•" FontSize="28" HorizontalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Vegetables" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="14 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>

                                <!-- Spices -->
                                <Border Grid.Column="3" Background="White" CornerRadius="16" Padding="20" Margin="6,0,0,0" Cursor="Hand">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#9C27B0" Direction="270" ShadowDepth="6" Opacity="0.12" BlurRadius="16"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <Border Background="#F3E5F5" CornerRadius="12" Padding="12" Margin="0,0,0,12">
                                            <TextBlock Text="ðŸ§‚" FontSize="28" HorizontalAlignment="Center"/>
                                        </Border>
                                        <TextBlock Text="Spices" FontSize="18" FontWeight="Bold" Foreground="#1F2937" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                                        <TextBlock Text="25 items" FontSize="14" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Detailed Ingredients List -->
                                                <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                <!-- Left Column - Protein Sources -->
                                <StackPanel Grid.Column="0" Margin="0,0,12,0">
                                    <Border Background="White" CornerRadius="16" Padding="24">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                        </Border.Effect>
                                    <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                                <TextBlock Text="ðŸ‘¨â€ðŸ³" FontSize="20" Margin="0,0,8,0"/>
                                                <TextBlock Text="Protein Sources" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            </StackPanel>
                                        
                                            <!-- Chicken Breast -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                    <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ—" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Chicken Breast" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="High protein, low fat" FontSize="12" Foreground="#6B7280"/>
                                                            </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Salmon Fillet -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŸ" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Salmon Fillet" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Omega-3 fatty acids" FontSize="12" Foreground="#6B7280"/>
                                                            </StackPanel>
                                                    </StackPanel>
                                        </Border>
                                            
                                            <!-- Beef Tenderloin -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¥©" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Beef Tenderloin" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Iron-rich" FontSize="12" Foreground="#6B7280"/>
                        </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Shrimp -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¦" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Shrimp" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Low calorie" FontSize="12" Foreground="#6B7280"/>
                                                            </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Eggs -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ¥š" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Eggs" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Complete protein" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                                    </Border>
                                    </StackPanel>
                                </Border>
                                </StackPanel>
                                
                                <!-- Right Column - Spices & Herbs -->
                                <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                    <Border Background="White" CornerRadius="16" Padding="24">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#9C27B0" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                        </Border.Effect>
                                    <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                                <TextBlock Text="ðŸ§‚" FontSize="20" Margin="0,0,8,0"/>
                                                <TextBlock Text="Spices &amp; Herbs" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                            </StackPanel>
                                        
                                            <!-- Salt -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸ§‚" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Salt" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Sodium chloride" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Black Pepper -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="âš«" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Black Pepper" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Piperine" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Turmeric -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                    <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŸ¡" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Turmeric" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Curcumin" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                            
                                            <!-- Basil -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Margin="0,0,0,12" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŒ¿" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Basil" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Eugenol" FontSize="12" Foreground="#6B7280"/>
                                                </StackPanel>
                                                </StackPanel>
                                        </Border>
                                            
                                            <!-- Cayenne -->
                                            <Border Background="#F8FAFC" CornerRadius="12" Padding="16" Cursor="Hand">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="ðŸŒ¶ï¸" FontSize="16" Margin="0,0,12,0"/>
                                                    <StackPanel>
                                                        <TextBlock Text="Cayenne" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937"/>
                                                        <TextBlock Text="Capsaicin" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                    </StackPanel>
                                </Border>
                                </StackPanel>
                            </Grid>
                        </StackPanel>

                       <!-- AI Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=AI}">
                           <TextBlock Text="ðŸ¤– AI Chef &amp; Judge" FontSize="24" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,20"/>
                           
                            <Grid>
                               <Grid.ColumnDefinitions>
                                   <ColumnDefinition Width="*"/>
                                   <ColumnDefinition Width="*"/>
                               </Grid.ColumnDefinitions>
                               
                               <!-- AI Judge Section -->
                               <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸŽ¯ AI Judge" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                        <TextBlock Text="Upload a photo of your dish and get AI-powered feedback on presentation, technique, and suggestions for improvement." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,16"
                                              Height="60"/>
                                        <Button Content="ðŸ“¸ Upload Photo &amp; Judge" 
                                           Background="#8B5CF6"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding JudgeDishCommand}"/>
                                    </StackPanel>
                                </Border>

                               <!-- AI Chef Section -->
                               <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸ‘¨â€ðŸ³ AI Chef" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                       <TextBlock Text="Let AI create custom recipes, analyze nutrition, and provide cooking guidance based on your preferences." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,16"
                                              Height="60"/>
                                       <Button Content="ðŸŽ² Generate Recipe" 
                                           Background="#4CAF50"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding GenerateRecipeCommand}"/>
                                    </StackPanel>
                                </Border>
                           </Grid>
                           
                           <!-- Additional AI Features -->
                           <Grid Margin="0,16,0,0">
                               <Grid.ColumnDefinitions>
                                   <ColumnDefinition Width="*"/>
                                   <ColumnDefinition Width="*"/>
                               </Grid.ColumnDefinitions>

                                <!-- Smart Shopping List -->
                               <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸ›’ Smart Shopping List" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                        <TextBlock Text="AI analyzes your recipes and creates an optimized shopping list with quantities and store layout suggestions." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,16"
                                              Height="60"/>
                                        <Button Content="ðŸ“‹ Generate Shopping List" 
                                           Background="#F59E0B"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding GenerateShoppingListCommand}"/>
                                    </StackPanel>
                                </Border>

                                <!-- Nutrition Analysis -->
                               <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <StackPanel>
                                       <TextBlock Text="ðŸ“Š Nutrition Analysis" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                        <TextBlock Text="Get detailed nutritional information and health recommendations for your recipes using AI analysis." 
                                              FontSize="14" 
                                              Foreground="#6B7280"
                                              TextWrapping="Wrap"
                                              Margin="0,0,0,16"
                                              Height="60"/>
                                       
                                       <!-- Nutrition Analysis Button -->
                                       <Button Content="ðŸ¥— Analyze Nutrition" 
                                           Background="#E74C3C"
                                           Foreground="White"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Padding="16,12"
                                           BorderThickness="0"
                                           HorizontalAlignment="Stretch"
                                           Command="{Binding OpenNutritionAnalysisCommand}"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Analytics Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Analytics}">
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="ðŸ“Š Analytics Dashboard" FontSize="24" FontWeight="Bold" Foreground="#1F2937"/>
                                <Button Grid.Column="1" Content="ðŸ”„ Refresh" Padding="12,6" Margin="8,0,0,0" Background="#4CAF50" Foreground="White" BorderThickness="0" Cursor="Hand" Command="{Binding RefreshDashboardCommand}"/>
                            </Grid>
                            
                            <!-- Analytics-Specific KPI Cards (different from Dashboard) -->
                            <Grid Margin="0,0,0,24">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Pantry Coverage -->
                                <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="ðŸ§º" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding PantryCoveragePercent, StringFormat={}{0:F0}%}" FontSize="26" FontWeight="Bold" Foreground="#16A34A" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Pantry Coverage" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                        <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                                            <Border Background="#4CAF50" CornerRadius="3">
                                                <Border.Width>
                                                    <Binding Path="PantryCoveragePercent" Converter="{StaticResource CountToWidthConverter}"/>
                                                </Border.Width>
                                            </Border>
                                        </Border>
                                    </StackPanel>
                                </Border>

                                <!-- AI Engagement -->
                                <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#F59E0B" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="ðŸ¤" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding AIEngagementPercent, StringFormat={}{0:F0}%}" FontSize="26" FontWeight="Bold" Foreground="#F59E0B" HorizontalAlignment="Center"/>
                                        <TextBlock Text="AI Engagement" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                        <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                                            <Border Background="#F59E0B" CornerRadius="3">
                                                <Border.Width>
                                                    <Binding Path="AIEngagementPercent" Converter="{StaticResource CountToWidthConverter}"/>
                                                </Border.Width>
                                            </Border>
                                        </Border>
                                    </StackPanel>
                                </Border>

                                <!-- AI Success Rate -->
                                <Border Grid.Column="2" Background="White" CornerRadius="12" Padding="20" Margin="8,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#EF4444" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="âœ…" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding SuccessRate, StringFormat={}{0:F0}%}" FontSize="26" FontWeight="Bold" Foreground="#EF4444" HorizontalAlignment="Center"/>
                                        <TextBlock Text="AI Success Rate" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                        <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                                            <Border Background="#EF4444" CornerRadius="3">
                                                <Border.Width>
                                                    <Binding Path="SuccessRate" Converter="{StaticResource CountToWidthConverter}"/>
                                                </Border.Width>
                                            </Border>
                                        </Border>
                                    </StackPanel>
                                </Border>

                                <!-- AI Actions -->
                                <Border Grid.Column="3" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#8B5CF6" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                                    </Border.Effect>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="ðŸ¤–" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding AIOperationsCount}" FontSize="26" FontWeight="Bold" Foreground="#8B5CF6" HorizontalAlignment="Center"/>
                                        <TextBlock Text="AI Activity" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                                        <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                                            <Border Background="#8B5CF6" CornerRadius="3" Width="64"/>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <!-- Charts Section -->
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Recipe Distribution as Bars (clearer than donut when skewed) -->
                                <Border Grid.Row="0" Grid.Column="0" CornerRadius="12" Padding="12" Margin="0,0,8,8">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#667eea" Offset="0"/>
                                            <GradientStop Color="#764ba2" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#667eea" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“Š Recipe Distribution" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                                        <Grid Height="160" Margin="0,0,0,8">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0" VerticalAlignment="Bottom" Margin="6,0" ToolTip="{Binding MainDishesCount, StringFormat=Main Dishes: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#FF6B6B" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="MainDishesCount" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="Main Dishes" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Margin="6,0" ToolTip="{Binding DessertsCount, StringFormat=Desserts: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#4CAF50" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="DessertsCount" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="Desserts" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="2" VerticalAlignment="Bottom" Margin="6,0" ToolTip="{Binding QuickMealsCount, StringFormat=Quick Meals: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#9C27B0" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="QuickMealsCount" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="Quick Meals" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Border>

                                <!-- Cooking Time Trend Chart -->
                                <Border Grid.Row="0" Grid.Column="1" CornerRadius="12" Padding="12" Margin="8,0,0,8">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#f093fb" Offset="0"/>
                                            <GradientStop Color="#f5576c" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#f093fb" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“ˆ Cooking Time Trend" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                                        <Grid Height="160" Margin="0,0,0,8">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime0To30Count, StringFormat=0-30: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#FF6B6B" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="CookingTime0To30Count" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="0-30" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime30To60Count, StringFormat=30-60: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#4CAF50" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="CookingTime30To60Count" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="30-60" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="2" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime60To90Count, StringFormat=60-90: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#FF9800" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="CookingTime60To90Count" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="60-90" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="3" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime90To120Count, StringFormat=90-120: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#9C27B0" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="CookingTime90To120Count" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="90-120" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="4" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime120PlusCount, StringFormat=120+: {0}}">
                                                <Border CornerRadius="6,6,0,0" Background="#607D8B" Margin="0,0,0,8">
                                                    <Border.Height>
                                                        <Binding Path="CookingTime120PlusCount" Converter="{StaticResource CountToHeightConverter}"/>
                                                    </Border.Height>
                                                </Border>
                                                <TextBlock Text="120+" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </Grid>
                                        <TextBlock Text="Recipes by Cooking Time (minutes)" FontSize="14" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                    </StackPanel>
                                </Border>

                                <!-- Difficulty Level Chart -->
                                <Border Grid.Row="1" Grid.Column="0" CornerRadius="12" Padding="12" Margin="0,8,8,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#4CAF50" Offset="0"/>
                                            <GradientStop Color="#FFBBAD66" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸŽ¯ Difficulty Levels" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                                        <StackPanel Margin="0,0,0,16">
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="60"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Easy" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                                <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#4CAF50" Margin="8,0" HorizontalAlignment="Left">
                                                    <Border.Width>
                                                        <Binding Path="EasyDifficultyCount" Converter="{StaticResource CountToWidthConverter}"/>
                                                    </Border.Width>
                                                </Border>
                                                <TextBlock Grid.Column="2" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <TextBlock.Text>
                                                        <Binding Path="EasyDifficultyCount"/>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                            </Grid>
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="60"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Medium" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                                <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#FF9800" Margin="8,0" HorizontalAlignment="Left">
                                                    <Border.Width>
                                                        <Binding Path="MediumDifficultyCount" Converter="{StaticResource CountToWidthConverter}"/>
                                                    </Border.Width>
                                                </Border>
                                                <TextBlock Grid.Column="2" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <TextBlock.Text>
                                                        <Binding Path="MediumDifficultyCount"/>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                            </Grid>
                                            <Grid Margin="0,0,0,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="60"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Hard" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                                                <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#F44336" Margin="8,0" HorizontalAlignment="Left">
                                                    <Border.Width>
                                                        <Binding Path="HardDifficultyCount" Converter="{StaticResource CountToWidthConverter}"/>
                                                    </Border.Width>
                                                </Border>
                                                <TextBlock Grid.Column="2" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <TextBlock.Text>
                                                        <Binding Path="HardDifficultyCount"/>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Monthly Recipe Creation Chart -->
                                <Border Grid.Row="1" Grid.Column="1" CornerRadius="12" Padding="12" Margin="8,8,0,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF6B6B" Offset="0"/>
                                            <GradientStop Color="#FF8E8E" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                                    </Border.Effect>
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“… Monthly Activity" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                                        <Grid Height="140" Margin="0,0,0,8">
                                            <Canvas>
                                                <Polyline Stroke="White" StrokeThickness="3" StrokeLineJoin="Round">
                                                    <Polyline.Points>
                                                        <Binding Path="MonthlyRecipeCounts" Converter="{StaticResource MonthlyDataToPointsConverter}"/>
                                                    </Polyline.Points>
                                                </Polyline>
                                                <!-- Data points will be dynamically positioned based on the polyline points -->
                                                <Ellipse Canvas.Left="15" Canvas.Top="175" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="55" Canvas.Top="155" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="95" Canvas.Top="135" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="135" Canvas.Top="115" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="175" Canvas.Top="95" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="215" Canvas.Top="75" Width="10" Height="10" Fill="White"/>
                                                <Ellipse Canvas.Left="255" Canvas.Top="55" Width="10" Height="10" Fill="White"/>
                                                <TextBlock Canvas.Left="15" Canvas.Top="190" Text="Jan" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="55" Canvas.Top="190" Text="Feb" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="95" Canvas.Top="190" Text="Mar" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="135" Canvas.Top="190" Text="Apr" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="175" Canvas.Top="190" Text="May" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="215" Canvas.Top="190" Text="Jun" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock Canvas.Left="255" Canvas.Top="190" Text="Jul" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                                            </Canvas>
                                        </Grid>
                                        <TextBlock Text="Recipes created per month" FontSize="14" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Settings Content -->
                        <StackPanel Visibility="{Binding SelectedTab, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=Settings}">
                            <TextBlock Text="âš™ï¸ Settings" FontSize="24" FontWeight="Bold" Foreground="#1F2937" Margin="0,0,0,20"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Application Settings -->
                                <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Loc_ApplicationSettings}" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,16"/>
                                        
                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="{Binding Loc_Theme}" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <ComboBox SelectedValue="{Binding SelectedTheme, Mode=TwoWay}" SelectedValuePath="Tag" Height="34" FontSize="14">
                                                <ComboBoxItem Content="ðŸŒž Light Theme" Tag="Light"/>
                                                <ComboBoxItem Content="ðŸŒ™ Dark Theme" Tag="Dark"/>
                                            </ComboBox>
                                    </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="{Binding Loc_Language}" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <ComboBox SelectedValue="{Binding SelectedLanguage, Mode=TwoWay}" SelectedValuePath="Tag" Height="34" FontSize="14">
                                                <ComboBoxItem Content="ðŸ‡ºðŸ‡¸ English" Tag="English"/>
                                                <ComboBoxItem Content="ðŸ‡»ðŸ‡³ Vietnamese" Tag="Vietnamese"/>
                                            </ComboBox>
                                    </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="{Binding Loc_DefaultServings}" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="{Binding DefaultServings, Mode=TwoWay}" Height="34" FontSize="14" Padding="10,6"/>
                                    </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,16">
                                            <CheckBox IsChecked="{Binding NotificationsEnabled, Mode=TwoWay}" Content="{Binding Loc_EnableNotifications}" 
                                                      FontSize="14" Foreground="#374151" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        
                                        <Button Content="{Binding Loc_SaveSettings}" 
                                                Background="#4CAF50"
                                                Foreground="White"
                                                FontSize="14"
                                              FontWeight="SemiBold" 
                                                Padding="16,12"
                                                BorderThickness="0"
                                                HorizontalAlignment="Stretch"
                                                Command="{Binding SaveSettingsCommand}"
                                                Click="SaveSettingsButton_Click"/>
                                    </StackPanel>
                                </Border>

                                <!-- User Profile Settings -->
                                <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Loc_UserProfile}" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,16"/>

                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="{Binding Loc_Username}" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="admin" Height="34" FontSize="14" Padding="10,6" IsReadOnly="True"/>
                                        </StackPanel>

                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="{Binding Loc_Email}" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="admin@foodbook.com" Height="34" FontSize="14" Padding="10,6" IsReadOnly="True"/>
                                        </StackPanel>

                                        <StackPanel Margin="0,0,0,12">
                                            <TextBlock Text="Role" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,6"/>
                                            <TextBox Text="Administrator" Height="34" FontSize="14" Padding="10,6" IsReadOnly="True"/>
                                        </StackPanel>
                                        
                                        <StackPanel Margin="0,0,0,16">
                                            <CheckBox IsChecked="{Binding AutoSaveEnabled}" Content="ðŸ’¾ Auto-save recipes" 
                                                      FontSize="14" Foreground="#374151" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        
                                        <Button Content="ðŸ”„ Refresh Profile" 
                                                Background="#8B5CF6"
                                           Foreground="White"
                                           FontSize="14"
                                                FontWeight="SemiBold"
                                                Padding="16,12"
                                           BorderThickness="0"
                                                HorizontalAlignment="Stretch"
                                                Command="{Binding RefreshProfileCommand}"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                            
                            <!-- Advanced Settings -->
                            <Border Background="White" CornerRadius="12" Padding="20" Margin="0,16,0,0">
                                <StackPanel>
                                    <TextBlock Text="âš¡ Advanced Settings" FontSize="18" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,16"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Database Settings -->
                                        <Border Grid.Column="0" Background="#F8FAFC" CornerRadius="8" Padding="16" Margin="0,0,8,0">
                                <StackPanel>
                                                <TextBlock Text="ðŸ—„ï¸ Database" FontSize="16" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <TextBlock Text="Connection Status" FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                                                <TextBlock Text="âœ… Connected" FontSize="14" FontWeight="SemiBold" Foreground="#10B981" Margin="0,0,0,8"/>
                                                <Button Content="ðŸ”§ Test Connection" 
                                                        Background="#6B7280"
                                                        Foreground="White"
                                                        FontSize="12"
                                          FontWeight="SemiBold" 
                                                        Padding="12,8"
                                                        BorderThickness="0"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding TestDatabaseConnectionCommand}"/>
                                    </StackPanel>
                                        </Border>
                                        
                                        <!-- AI Settings -->
                                        <Border Grid.Column="1" Background="#F8FAFC" CornerRadius="8" Padding="16" Margin="4,0">
                                            <StackPanel>
                                                <TextBlock Text="ðŸ¤– AI Services" FontSize="16" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <TextBlock Text="AI Judge Status" FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                                                <TextBlock Text="âœ… Active" FontSize="14" FontWeight="SemiBold" Foreground="#10B981" Margin="0,0,0,8"/>
                                                <Button Content="âš™ï¸ Configure AI" 
                                                        Background="#8B5CF6"
                                                        Foreground="White"
                                                        FontSize="12"
                                                        FontWeight="SemiBold"
                                                        Padding="12,8"
                                                        BorderThickness="0"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding ConfigureAICommand}"/>
                                    </StackPanel>
                                        </Border>
                                        
                                        <!-- System Info -->
                                        <Border Grid.Column="2" Background="#F8FAFC" CornerRadius="8" Padding="16" Margin="8,0,0,0">
                                            <StackPanel>
                                                <TextBlock Text="ðŸ“Š System Info" FontSize="16" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <TextBlock Text="Version" FontSize="12" Foreground="#6B7280" Margin="0,0,0,4"/>
                                                <TextBlock Text="v1.0.0" FontSize="14" FontWeight="SemiBold" Foreground="#1F2937" Margin="0,0,0,8"/>
                                                <Button Content="ðŸ“‹ View Logs" 
                                                        Background="#F59E0B"
                                                        Foreground="White"
                                                        FontSize="12"
                                                        FontWeight="SemiBold"
                                                        Padding="12,8"
                                                        BorderThickness="0"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding ViewLogsCommand}"/>
                                    </StackPanel>
                                        </Border>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</Window>