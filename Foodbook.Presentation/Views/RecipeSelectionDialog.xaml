<Window x:Class="Foodbook.Presentation.Views.RecipeSelectionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Recipe for Analysis" 
        Height="600" 
        Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F8F9FA">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="📊 Select Recipe for Analysis" 
                       FontSize="20" 
                       FontWeight="Bold" 
                       Foreground="#2C3E50" 
                       HorizontalAlignment="Center"
                       Margin="0,0,0,8"/>
            <TextBlock Text="Choose a recipe from your collection to analyze its nutritional content" 
                       FontSize="12" 
                       Foreground="#7F8C8D" 
                       HorizontalAlignment="Center"/>
        </StackPanel>
        
        <!-- Recipe List -->
        <Border Grid.Row="1" 
                Background="White" 
                CornerRadius="8" 
                BorderBrush="#E9ECEF" 
                BorderThickness="1">
            <Border.Effect>
                <DropShadowEffect Color="#000000" Opacity="0.1" BlurRadius="10" ShadowDepth="2"/>
            </Border.Effect>
            <ListBox Name="RecipeListBox" 
                     Background="Transparent" 
                     BorderThickness="0"
                     SelectionChanged="OnRecipeSelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#F8F9FA" 
                                CornerRadius="6" 
                                Padding="15" 
                                Margin="5"
                                BorderBrush="#E9ECEF" 
                                BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="{Binding Title}" 
                                           FontSize="16" 
                                           FontWeight="SemiBold" 
                                           Foreground="#2C3E50" 
                                           Margin="0,0,0,5"/>
                                <TextBlock Text="{Binding Description}" 
                                           FontSize="12" 
                                           Foreground="#7F8C8D" 
                                           TextWrapping="Wrap"
                                           MaxHeight="40"
                                           TextTrimming="CharacterEllipsis"/>
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <TextBlock Text="⏱️ " FontSize="11" Foreground="#6C757D"/>
                                    <TextBlock FontSize="11" 
                                               Foreground="#6C757D" 
                                               Margin="0,0,15,0">
                                        <TextBlock.Text>
                                            <MultiBinding StringFormat="{}{0} min">
                                                <Binding Path="CookTime"/>
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                    <TextBlock Text="👥 " FontSize="11" Foreground="#6C757D"/>
                                    <TextBlock FontSize="11" 
                                               Foreground="#6C757D">
                                        <TextBlock.Text>
                                            <MultiBinding StringFormat="{}{0} servings">
                                                <Binding Path="Servings"/>
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">
            <Button Name="CancelButton" 
                    Content="Cancel" 
                    Width="80" 
                    Height="35" 
                    Margin="0,0,10,0"
                    Background="#6C757D" 
                    Foreground="White" 
                    BorderThickness="0" 
                    Click="OnCancelClicked"/>
            <Button Name="AnalyzeButton" 
                    Content="Analyze Recipe" 
                    Width="120" 
                    Height="35" 
                    Background="#28A745" 
                    Foreground="White" 
                    BorderThickness="0" 
                    IsEnabled="False"
                    Click="OnAnalyzeClicked"/>
        </StackPanel>
    </Grid>
</Window>
