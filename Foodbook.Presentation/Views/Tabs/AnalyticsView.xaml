<UserControl x:Class="Foodbook.Presentation.Views.Tabs.AnalyticsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <StackPanel>
        <Grid Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="ðŸ“Š Analytics Dashboard" FontSize="24" FontWeight="Bold" Foreground="#1F2937"/>
            <Button Grid.Column="1" Content="ðŸ”„ Refresh" Padding="12,6" Margin="8,0,0,0" Background="#4CAF50" Foreground="White" BorderThickness="0" Cursor="Hand" Command="{Binding RefreshDashboardCommand}"/>
        </Grid>

        <Grid Margin="0,0,0,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,8,0">
                <Border.Effect>
                    <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                </Border.Effect>
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="ðŸ§º" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="{Binding PantryCoveragePercent, StringFormat={}{0:F0}%}" FontSize="26" FontWeight="Bold" Foreground="#16A34A" HorizontalAlignment="Center"/>
                    <TextBlock Text="Pantry Coverage" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                    <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                        <Border Background="#4CAF50" CornerRadius="3">
                            <Border.Width>
                                <Binding Path="PantryCoveragePercent" Converter="{StaticResource CountToWidthConverter}"/>
                            </Border.Width>
                        </Border>
                    </Border>
                </StackPanel>
            </Border>
            <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="20" Margin="8,0">
                <Border.Effect>
                    <DropShadowEffect Color="#F59E0B" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                </Border.Effect>
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="ðŸ¤" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="{Binding AIEngagementPercent, StringFormat={}{0:F0}%}" FontSize="26" FontWeight="Bold" Foreground="#F59E0B" HorizontalAlignment="Center"/>
                    <TextBlock Text="AI Engagement" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                    <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                        <Border Background="#F59E0B" CornerRadius="3">
                            <Border.Width>
                                <Binding Path="AIEngagementPercent" Converter="{StaticResource CountToWidthConverter}"/>
                            </Border.Width>
                        </Border>
                    </Border>
                </StackPanel>
            </Border>
            <Border Grid.Column="2" Background="White" CornerRadius="12" Padding="20" Margin="8,0">
                <Border.Effect>
                    <DropShadowEffect Color="#EF4444" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                </Border.Effect>
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="âœ…" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="{Binding SuccessRate, StringFormat={}{0:F0}%}" FontSize="26" FontWeight="Bold" Foreground="#EF4444" HorizontalAlignment="Center"/>
                    <TextBlock Text="AI Success Rate" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                    <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                        <Border Background="#EF4444" CornerRadius="3">
                            <Border.Width>
                                <Binding Path="SuccessRate" Converter="{StaticResource CountToWidthConverter}"/>
                            </Border.Width>
                        </Border>
                    </Border>
                </StackPanel>
            </Border>
            <Border Grid.Column="3" Background="White" CornerRadius="12" Padding="20" Margin="8,0,0,0">
                <Border.Effect>
                    <DropShadowEffect Color="#8B5CF6" Direction="270" ShadowDepth="4" Opacity="0.1" BlurRadius="10"/>
                </Border.Effect>
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="ðŸ¤–" FontSize="22" Foreground="#111827" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="{Binding AIOperationsCount}" FontSize="26" FontWeight="Bold" Foreground="#8B5CF6" HorizontalAlignment="Center"/>
                    <TextBlock Text="AI Activity" FontSize="13" Foreground="#6B7280" HorizontalAlignment="Center"/>
                    <Border Height="6" Background="#F3F4F6" CornerRadius="3" Margin="0,8,0,0">
                        <Border Background="#8B5CF6" CornerRadius="3" Width="64"/>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Grid.Row="0" Grid.Column="0" CornerRadius="12" Padding="12" Margin="0,0,8,8">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#667eea" Offset="0"/>
                        <GradientStop Color="#764ba2" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.Effect>
                    <DropShadowEffect Color="#667eea" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="ðŸ“Š Recipe Distribution" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                    <Grid Height="160" Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" VerticalAlignment="Bottom" Margin="6,0" ToolTip="{Binding MainDishesCount, StringFormat=Main Dishes: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#FF6B6B" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="MainDishesCount" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="Main Dishes" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Margin="6,0" ToolTip="{Binding DessertsCount, StringFormat=Desserts: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#4CAF50" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="DessertsCount" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="Desserts" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" VerticalAlignment="Bottom" Margin="6,0" ToolTip="{Binding QuickMealsCount, StringFormat=Quick Meals: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#9C27B0" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="QuickMealsCount" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="Quick Meals" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <Border Grid.Row="0" Grid.Column="1" CornerRadius="12" Padding="12" Margin="8,0,0,8">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#f093fb" Offset="0"/>
                        <GradientStop Color="#f5576c" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.Effect>
                    <DropShadowEffect Color="#f093fb" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="ðŸ“ˆ Cooking Time Trend" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                    <Grid Height="160" Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime0To30Count, StringFormat=0-30: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#FF6B6B" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="CookingTime0To30Count" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="0-30" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime30To60Count, StringFormat=30-60: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#4CAF50" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="CookingTime30To60Count" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="30-60" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime60To90Count, StringFormat=60-90: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#FF9800" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="CookingTime60To90Count" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="60-90" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="3" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime90To120Count, StringFormat=90-120: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#9C27B0" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="CookingTime90To120Count" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="90-120" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="4" VerticalAlignment="Bottom" Margin="4,0" ToolTip="{Binding CookingTime120PlusCount, StringFormat=120+: {0}}">
                            <Border CornerRadius="6,6,0,0" Background="#607D8B" Margin="0,0,0,8">
                                <Border.Height>
                                    <Binding Path="CookingTime120PlusCount" Converter="{StaticResource CountToHeightConverter}"/>
                                </Border.Height>
                            </Border>
                            <TextBlock Text="120+" FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                    <TextBlock Text="Recipes by Cooking Time (minutes)" FontSize="14" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                </StackPanel>
            </Border>

            <Border Grid.Row="1" Grid.Column="0" CornerRadius="12" Padding="12" Margin="0,8,8,0">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#4CAF50" Offset="0"/>
                        <GradientStop Color="#FFBBAD66" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.Effect>
                    <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="ðŸŽ¯ Difficulty Levels" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                    <StackPanel Margin="0,0,0,16">
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="Easy" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                            <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#4CAF50" Margin="8,0" HorizontalAlignment="Left">
                                <Border.Width>
                                    <Binding Path="EasyDifficultyCount" Converter="{StaticResource CountToWidthConverter}"/>
                                </Border.Width>
                            </Border>
                            <TextBlock Grid.Column="2" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" Text="{Binding EasyDifficultyCount}"/>
                        </Grid>
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="Medium" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                            <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#FF9800" Margin="8,0" HorizontalAlignment="Left">
                                <Border.Width>
                                    <Binding Path="MediumDifficultyCount" Converter="{StaticResource CountToWidthConverter}"/>
                                </Border.Width>
                            </Border>
                            <TextBlock Grid.Column="2" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" Text="{Binding MediumDifficultyCount}"/>
                        </Grid>
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="Hard" FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                            <Border Grid.Column="1" Height="20" CornerRadius="10" Background="#F44336" Margin="8,0" HorizontalAlignment="Left">
                                <Border.Width>
                                    <Binding Path="HardDifficultyCount" Converter="{StaticResource CountToWidthConverter}"/>
                                </Border.Width>
                            </Border>
                            <TextBlock Grid.Column="2" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" Text="{Binding HardDifficultyCount}"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border Grid.Row="1" Grid.Column="1" CornerRadius="12" Padding="12" Margin="8,8,0,0">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FF6B6B" Offset="0"/>
                        <GradientStop Color="#FF8E8E" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.Effect>
                    <DropShadowEffect Color="#FF6B6B" Direction="270" ShadowDepth="12" Opacity="0.4" BlurRadius="25"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="ðŸ“… Monthly Activity" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                    <Grid Height="140" Margin="0,0,0,8">
                        <Canvas>
                            <Polyline Stroke="White" StrokeThickness="3" StrokeLineJoin="Round">
                                <Polyline.Points>
                                    <Binding Path="MonthlyRecipeCounts" Converter="{StaticResource MonthlyDataToPointsConverter}"/>
                                </Polyline.Points>
                            </Polyline>
                            <Ellipse Canvas.Left="15" Canvas.Top="175" Width="10" Height="10" Fill="White"/>
                            <Ellipse Canvas.Left="55" Canvas.Top="155" Width="10" Height="10" Fill="White"/>
                            <Ellipse Canvas.Left="95" Canvas.Top="135" Width="10" Height="10" Fill="White"/>
                            <Ellipse Canvas.Left="135" Canvas.Top="115" Width="10" Height="10" Fill="White"/>
                            <Ellipse Canvas.Left="175" Canvas.Top="95" Width="10" Height="10" Fill="White"/>
                            <Ellipse Canvas.Left="215" Canvas.Top="75" Width="10" Height="10" Fill="White"/>
                            <Ellipse Canvas.Left="255" Canvas.Top="55" Width="10" Height="10" Fill="White"/>
                            <TextBlock Canvas.Left="15" Canvas.Top="190" Text="Jan" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                            <TextBlock Canvas.Left="55" Canvas.Top="190" Text="Feb" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                            <TextBlock Canvas.Left="95" Canvas.Top="190" Text="Mar" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                            <TextBlock Canvas.Left="135" Canvas.Top="190" Text="Apr" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                            <TextBlock Canvas.Left="175" Canvas.Top="190" Text="May" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                            <TextBlock Canvas.Left="215" Canvas.Top="190" Text="Jun" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                            <TextBlock Canvas.Left="255" Canvas.Top="190" Text="Jul" FontSize="10" Foreground="White" HorizontalAlignment="Center"/>
                        </Canvas>
                    </Grid>
                    <TextBlock Text="Recipes created per month" FontSize="14" Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                </StackPanel>
            </Border>
        </Grid>
    </StackPanel>
</UserControl>


